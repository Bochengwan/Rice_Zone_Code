{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alexwan/Documents/GitHub/final-frontend-BochengWan123/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alexwan/Documents/GitHub/final-frontend-BochengWan123/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/alexwan/Documents/GitHub/final-frontend-BochengWan123/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alexwan/Documents/GitHub/final-frontend-BochengWan123/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/alexwan/Documents/GitHub/final-frontend-BochengWan123/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/alexwan/Documents/GitHub/final-frontend-BochengWan123/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/alexwan/Documents/GitHub/final-frontend-BochengWan123/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from'react-redux';import{Link,Redirect}from\"react-router-dom\";import'bootstrap/dist/css/bootstrap.min.css';import{gotomain as _gotomain,updateavatar as _updateavatar,smallimg}from\"../../actions\";import'./img.css';var baseurl=new URL(\"https://ricezonefinalbocheng.herokuapp.com/\");var Profile=/*#__PURE__*/function(_React$Component){_inherits(Profile,_React$Component);var _super=_createSuper(Profile);function Profile(props){var _this;_classCallCheck(this,Profile);_this=_super.call(this,props);_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handleMain=_this.handleMain.bind(_assertThisInitialized(_this));_this.handleUpload=_this.handleUpload.bind(_assertThisInitialized(_this));_this.handleCloud=_this.handleCloud.bind(_assertThisInitialized(_this));_this.theuser=_this.props.usergroup.find(function(element){return element[0]===_this.props.userId;});if(_this.theuser!==undefined){_this.baseinfo={zipcode:_this.theuser[3],phonenumber:_this.theuser[2],email:_this.theuser[4]};}else{_this.baseinfo={};}_this.state={userId:_this.props.userId,baseinfo:_this.baseinfo,password:_this.props.password,toMain:false,friendlist:_this.props.friendlist,email:'dummy@gmail.com',phone:'000-000-0000',avatar:_this.props.avatar,zipcode:'00000',upload:false};return _this;}_createClass(Profile,[{key:\"componentDidMount\",value:function componentDidMount(){var option={headers:{\"content-type\":\"application/json\"},method:\"GET\",credentials:\"include\"};function b(_x){return _b.apply(this,arguments);}function _b(){_b=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(x){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(baseurl+\"zipcode\",option).then(function(res){return res.json();}).then(function(res){return x.setState({zipcode:res.zipcode});});case 2:_context.next=4;return fetch(baseurl+\"phone\",option).then(function(res){return res.json();}).then(function(res){return x.setState({phone:res.phone});});case 4:_context.next=6;return fetch(baseurl+\"email\",option).then(function(res){return res.json();}).then(function(res){return x.setState({email:res.email});});case 6:_context.next=8;return fetch(baseurl+\"avatar\",option).then(function(res){return res.json();}).then(function(res){x.setState({avatar:res.avatar});});case 8:console.log(x.state);case 9:case\"end\":return _context.stop();}}},_callee);}));return _b.apply(this,arguments);}b(this);}},{key:\"handleUpload\",value:function handleUpload(e){e.preventDefault();this.setState({upload:true});}},{key:\"handleCloud\",value:function handleCloud(e){e.preventDefault();if(this.state.upload){var formData=new FormData();var file=document.getElementById('uploadavatar').files[0];formData.append(\"image\",file);formData.append(\"avatar\",this.props.userId);var option={method:\"PUT\",body:formData,credentials:\"include\"};function b(_x2){return _b2.apply(this,arguments);}function _b2(){_b2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(x){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(baseurl+\"avatar\",option).then(function(res){return res.json;}).then(function(res){x.props.updateavatar(res.avatar);x.setState({avatar:res.avatar,upload:false});});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _b2.apply(this,arguments);}b(this);}}},{key:\"handleMain\",value:function handleMain(e){e.preventDefault();console.log(this.props);var input={userId:this.state.userId,password:this.state.password,baseinfo:this.state.baseinfo};this.props.gotomain(input);this.setState({toMain:true});}},{key:\"handleSubmit\",value:function handleSubmit(e){e.preventDefault();var option={headers:{\"content-type\":\"application/json\"},method:\"PUT\",credentials:\"include\"};var zp=document.getElementById('zipcode').value;var pn=document.getElementById('phone').value;var pw=Number(document.getElementById('password').value);var em=document.getElementById('email').value;function b(_x3){return _b3.apply(this,arguments);}function _b3(){_b3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(x){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(zp!==''){fetch(baseurl+\"zipcode\",Object.assign(option,{body:JSON.stringify({zipcode:zp})})).then(function(res){return res.json();}).then(function(res){return x.setState({zipcode:res.zipcode});});}if(pn!==''){fetch(baseurl+\"phone\",Object.assign(option,{body:JSON.stringify({phone:pn})})).then(function(res){return res.json();}).then(function(res){console.log(res);x.setState({phone:res.phone});});}if(em!==''){fetch(baseurl+\"email\",Object.assign(option,{body:JSON.stringify({email:em})})).then(function(res){return res.json();}).then(function(res){return x.setState({email:res.email});});}case 3:case\"end\":return _context3.stop();}}},_callee3);}));return _b3.apply(this,arguments);}b(this);zp='';pn='';pw='';em='';// if(user.value !== ''){this.setState({userId:user.value})};\n// if(pw.value !== ''){this.setState({password:pw.value})};\n// temp = zp.value == ''? temp: {...temp,zipcode:zp.value};\n// temp = pn.value == ''? temp: {...temp,phonenumber:pn.value};\n// temp = em.value == ''? temp: {...temp,email:em.value};\n// this.setState({baseinfo:temp});\n// user.value = '';\n}},{key:\"render\",value:function render(){if(this.state.toMain){return/*#__PURE__*/React.createElement(Redirect,{to:\"/Main\"});}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"jumbotron text-center\"},/*#__PURE__*/React.createElement(\"h1\",null,\" Hello! \",this.state.userId,\"!Welcome to your profile!\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-1\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",type:\"submit\",onClick:this.handleMain},\"To Main\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-4 col-md-4 col-sm-4 col-xs-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"img\",{src:this.state.avatar}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"p\",null,\"Upload your profile picture:\",/*#__PURE__*/React.createElement(\"input\",{id:\"uploadavatar\",type:\"file\",onChange:this.handleUpload})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn-primary\",onClick:this.handleCloud},\"Upload\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"form\",{method:\"GET\",onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col-md-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"font-weight-bold text-left\",htmlFor:\"email\"},\"Email:\"),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",type:\"email\",id:\"email\",placeholder:\"Update your email\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col-md-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"font-weight-bold text-left\",htmlFor:\"phone\"},\"Phone:\"),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",type:\"tel\",id:\"phone\",pattern:\"[0-9]{3}-[0-9]{3}-[0-9]{4}\",placeholder:\"Update your phone\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col-md-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"font-weight-bold text-left\",htmlFor:\"zipcode\"},\"Zipcode:\"),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",type:\"text\",id:\"zipcode\",pattern:\"[0-9]{5}\",placeholder:\"Update your zipcode\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col-md-12\"},/*#__PURE__*/React.createElement(\"label\",{className:\"font-weight-bold text-left\",htmlFor:\"password\"},\"Password:\"),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",type:\"password\",id:\"password\",placeholder:\"Update your password\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-row center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col-md-12\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",type:\"submit\"},\"Update Info\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-8 col-md-8 col-sm-8 col-xs-8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header text-left\"},\"Current info\"),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body text left\"},/*#__PURE__*/React.createElement(\"p\",null,\"Account name: \",this.state.userId),/*#__PURE__*/React.createElement(\"p\",null,\"Email Address: \",this.state.email),/*#__PURE__*/React.createElement(\"p\",null,\"Phone number: \",this.state.phone),/*#__PURE__*/React.createElement(\"p\",null,\"Zipcode: \",this.state.zipcode)))));}}]);return Profile;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{userId:state.userId,password:state.password,baseinfo:state.baseinfo,friendlist:state.friendlist,articless:state.articles,usergroup:state.usergroup,avatar:state.avatar};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{gotomain:function gotomain(input){return dispatch(_gotomain(input));},updateavatar:function updateavatar(avatar){return dispatch(_updateavatar(avatar));}};};export default connect(mapStateToProps,mapDispatchToProps)(Profile);","map":{"version":3,"sources":["/Users/alexwan/Documents/GitHub/final-frontend-BochengWan123/frontend/src/Component/Profile/Profile.js"],"names":["React","connect","Link","Redirect","gotomain","updateavatar","smallimg","baseurl","URL","Profile","props","handleSubmit","bind","handleMain","handleUpload","handleCloud","theuser","usergroup","find","element","userId","undefined","baseinfo","zipcode","phonenumber","email","state","password","toMain","friendlist","phone","avatar","upload","option","headers","method","credentials","b","x","fetch","then","res","json","setState","console","log","e","preventDefault","formData","FormData","file","document","getElementById","files","append","body","input","zp","value","pn","pw","Number","em","Object","assign","JSON","stringify","Component","mapStateToProps","articless","articles","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from 'react-redux';\nimport {Link, Redirect} from \"react-router-dom\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {gotomain,updateavatar,  smallimg} from \"../../actions\";\nimport './img.css';\nconst baseurl = new URL(\"https://ricezonefinalbocheng.herokuapp.com/\");\n\nclass Profile extends React.Component{\n    constructor(props) {\n        super(props);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleMain = this.handleMain.bind(this);\n        this.handleUpload = this.handleUpload.bind(this);\n        this.handleCloud = this.handleCloud.bind(this);\n        this.theuser = this.props.usergroup.find(element=>element[0]===this.props.userId)\n        if(this.theuser !== undefined) {\n            this.baseinfo = {zipcode: this.theuser[3], phonenumber: this.theuser[2], email: this.theuser[4]}\n        } else{\n            this.baseinfo = {}\n        }\n\n        this.state = {\n            userId:this.props.userId,\n            baseinfo:this.baseinfo,\n            password:this.props.password,\n            toMain:false,\n            friendlist:this.props.friendlist,\n            email:'dummy@gmail.com',\n            phone:'000-000-0000',\n            avatar:this.props.avatar,\n            zipcode:'00000',\n            upload:false\n        }\n\n\n    }\n    componentDidMount() {\n        let option = {\n            headers: {\"content-type\": \"application/json\"},\n            method: \"GET\",\n            credentials: \"include\",\n        };\n\n\n        async function b(x) {\n            await fetch(baseurl + \"zipcode\", option).then(res => res.json()).then(res => x.setState({zipcode: res.zipcode}));\n            await fetch(baseurl + \"phone\", option).then(res => res.json()).then(res => x.setState({phone: res.phone}));\n            await fetch(baseurl + \"email\", option).then(res => res.json()).then(res => x.setState({email: res.email}));\n            await fetch(baseurl + \"avatar\", option).then(res => res.json()).then(res => {\n                x.setState({avatar: res.avatar});\n            });\n            console.log(x.state)\n\n        }\n\n        b(this);\n    }\n    handleUpload(e){\n        e.preventDefault();\n        this.setState({upload:true});\n    }\n    handleCloud(e){\n        e.preventDefault();\n        if(this.state.upload){\n            var formData = new FormData();\n            let file = document.getElementById('uploadavatar').files[0];\n            formData.append(\"image\",file);\n            formData.append(\"avatar\",this.props.userId);\n            let option = {\n\n                method: \"PUT\",\n                body:formData,\n                credentials: \"include\",\n            };\n            async function b(x) {\n                await fetch(baseurl+\"avatar\",option).then(res=>res.json).then(res=>{\n                    x.props.updateavatar(res.avatar);\n                    x.setState({avatar: res.avatar,upload:false});\n\n                })\n            }\n            b(this);\n\n\n        }\n\n    }\n\n    handleMain(e){\n        e.preventDefault();\n        console.log(this.props);\n        let input = {userId:this.state.userId,password: this.state.password,baseinfo:this.state.baseinfo};\n\n        this.props.gotomain(input);\n\n        this.setState({toMain:true});\n\n    }\n    handleSubmit(e) {\n        e.preventDefault();\n        let option = {\n            headers: {\"content-type\": \"application/json\"},\n            method: \"PUT\",\n            credentials: \"include\",\n        };\n        let zp = document.getElementById('zipcode').value;\n        let pn = document.getElementById('phone').value;\n        let pw = Number(document.getElementById('password').value);\n        let em = document.getElementById('email').value;\n\n\n        async function b(x) {\n\n            if (zp !== '') {\n                fetch(baseurl + \"zipcode\", Object.assign(option,{body:JSON.stringify({zipcode:zp})})).then(res => res.json()).then(res => x.setState({zipcode: res.zipcode}));}\n             if (pn !== '') {\n                 fetch(baseurl + \"phone\", Object.assign(option,{body:JSON.stringify({phone:pn})})).then(res => res.json()).then(res => {console.log(res);x.setState({phone: res.phone})});}\n            if (em !== '') {\n                fetch(baseurl + \"email\", Object.assign(option,{body:JSON.stringify({email:em})})).then(res => res.json()).then(res => x.setState({email: res.email}));}\n\n            }\n\n            b(this);\n        zp= '';\n        pn= '';\n        pw= '';\n        em= '';\n            // if(user.value !== ''){this.setState({userId:user.value})};\n            // if(pw.value !== ''){this.setState({password:pw.value})};\n            // temp = zp.value == ''? temp: {...temp,zipcode:zp.value};\n            // temp = pn.value == ''? temp: {...temp,phonenumber:pn.value};\n            // temp = em.value == ''? temp: {...temp,email:em.value};\n            // this.setState({baseinfo:temp});\n            // user.value = '';\n\n        }\n\n    render(){\n        if (this.state.toMain) {\n            return (\n\n                <Redirect to='/Main'/>\n\n            )\n        }\n        return(\n\n            <div>\n            <div className=\"jumbotron text-center\">\n                <h1> Hello! {this.state.userId}!Welcome to your profile!</h1>\n            </div>\n\n                <div className='row'>\n                   <div className= 'col-md-1'>\n                       <button className=\"btn btn-primary\" type='submit'\n                           onClick={this.handleMain}>To Main\n                   </button>\n                   </div>\n                </div>\n\n                <div className = 'row'>\n                    <div className=\"col-lg-4 col-md-4 col-sm-4 col-xs-4\">\n                        <div className='card'>\n                            <div className='row'>\n                                <div className='col-md-12'>\n                                    <img src = {this.state.avatar}></img>\n                                </div>\n                            </div>\n                            <div className='row'>\n                                <div className='col-md-12'>\n                                    <p>Upload your profile picture:<input id = 'uploadavatar' type='file' onChange={this.handleUpload}/></p>\n                                    <button type='submit' className = 'btn-primary' onClick={this.handleCloud}>Upload</button>\n                                </div>\n                            </div>\n                        </div>\n\n\n                        <div className = 'card'>\n                            <form method=\"GET\" onSubmit={this.handleSubmit} >\n                                <div className = 'form-row'>\n                                    {/*<div className='form-group col-md-12'>*/}\n\n                                    {/*    <label className= 'font-weight-bold text-left' htmlFor='account_name'>Account Name:</label>*/}\n                                    {/*    <span>*/}\n                                    {/*    <input className='form-control' type=\"text\" id = \"account_name\" placeholder = 'Update your user Id' />*/}\n                                    {/*</span>*/}\n\n\n                                    {/*</div>*/}\n                                    <div className='form-group col-md-12'>\n\n                                        <label className= 'font-weight-bold text-left' htmlFor='email'>Email:</label>\n                                        <span>\n                                        <input className='form-control' type=\"email\" id = \"email\" placeholder = 'Update your email' />\n                                    </span>\n\n\n                                    </div>\n                                    <div className='form-group col-md-12'>\n\n                                        <label className= 'font-weight-bold text-left' htmlFor='phone'>Phone:</label>\n                                        <span>\n                                        <input className='form-control' type=\"tel\" id = \"phone\" pattern=\"[0-9]{3}-[0-9]{3}-[0-9]{4}\" placeholder = 'Update your phone' />\n                                    </span>\n\n\n                                    </div>\n                                    <div className='form-group col-md-12'>\n\n                                        <label className= 'font-weight-bold text-left' htmlFor='zipcode'>Zipcode:</label>\n                                        <span>\n                                        <input className='form-control' type=\"text\" id = \"zipcode\" pattern=\"[0-9]{5}\" placeholder = 'Update your zipcode' />\n                                    </span>\n\n\n                                    </div>\n                                    <div className='form-group col-md-12'>\n\n                                        <label className= 'font-weight-bold text-left' htmlFor='password'>Password:</label>\n                                        <span>\n                                        <input className='form-control' type=\"password\" id = \"password\" placeholder = 'Update your password' />\n                                    </span>\n\n\n                                    </div>\n\n                                </div>\n                                <div className= 'form-row center'>\n                                    <div className='form-group col-md-12'>\n                                        <button className=\"btn btn-primary\" type = 'submit'>Update Info</button>\n                                    </div>\n                                </div>\n                            </form>\n\n\n                        </div>\n                    </div>\n\n                    <div className=\"col-lg-8 col-md-8 col-sm-8 col-xs-8\">\n                        <div className='card-header text-left'>Current info</div>\n                        <div className = 'card-body text left'>\n                            <p>Account name: {this.state.userId}</p>\n                            <p>Email Address: {this.state.email}</p>\n                            <p>Phone number: {this.state.phone}</p>\n                            <p>Zipcode: {this.state.zipcode}</p>\n\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n\n\n        )\n\n    }\n\n}\nconst mapStateToProps = (state) => {\n    return {\n        userId:state.userId,\n        password:state.password,\n        baseinfo:state.baseinfo,\n        friendlist: state.friendlist,\n        articless:state.articles,\n        usergroup:state.usergroup,\n        avatar: state.avatar\n\n    }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n\n        gotomain: (input)=>dispatch(gotomain(input)),\n        updateavatar:(avatar)=>dispatch(updateavatar(avatar))\n\n    }\n};\n\nexport default connect(mapStateToProps,mapDispatchToProps)(Profile)"]},"metadata":{},"sourceType":"module"}