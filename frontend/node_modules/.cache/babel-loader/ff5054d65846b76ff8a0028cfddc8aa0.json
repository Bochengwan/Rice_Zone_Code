{"ast":null,"code":"import _toConsumableArray from\"/Users/alexwan/Documents/GitHub/hw4-BochengWan123/hw4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/alexwan/Documents/GitHub/hw4-BochengWan123/hw4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alexwan/Documents/GitHub/hw4-BochengWan123/hw4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/alexwan/Documents/GitHub/hw4-BochengWan123/hw4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/alexwan/Documents/GitHub/hw4-BochengWan123/hw4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/alexwan/Documents/GitHub/hw4-BochengWan123/hw4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from'react-redux';import'bootstrap/dist/css/bootstrap.min.css';import{Redirect}from\"react-router-dom\";import{userlogout as _userlogout,requestdata as _requestdata,updateheadline as _updateheadline,gotoprofile as _gotoprofile}from\"../../actions\";import Avatar from'react-avatar';import'./img.css';import{bigimg,smallimg}from\"../../actions\";var Main=/*#__PURE__*/function(_React$Component){_inherits(Main,_React$Component);var _super=_createSuper(Main);function Main(props){var _this;_classCallCheck(this,Main);_this=_super.call(this,props);_this.handleProfile=_this.handleProfile.bind(_assertThisInitialized(_this));_this.handleLogout=_this.handleLogout.bind(_assertThisInitialized(_this));_this.handleHeadline=_this.handleHeadline.bind(_assertThisInitialized(_this));_this.handleClear=_this.handleClear.bind(_assertThisInitialized(_this));_this.getfriends=_this.getfriends.bind(_assertThisInitialized(_this));_this.getarticles=_this.getarticles.bind(_assertThisInitialized(_this));_this.handlefriends=_this.handlefriends.bind(_assertThisInitialized(_this));_this.handleunfriends=_this.handleunfriends.bind(_assertThisInitialized(_this));_this.handlePost=_this.handlePost.bind(_assertThisInitialized(_this));console.log(_this.props);_this.state={userId:_this.props.userId,friendlist:_this.props.friendlist,baseinfo:_this.props.baseinfo,data:_this.props.data,toProfile:false,toLanding:false,headline:_this.props.headline,articles:_this.props.articles};_this.hardcodeId='1';return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(\"https://jsonplaceholder.typicode.com/posts\").then(function(res){return res.json();}).then(function(res){return _this2.props.requestdata(res);});var a=function a(){_this2.setState({data:_this2.props.data});console.log(_this2.state);if(_this2.state.friendlist.length==0){_this2.getfriends(_this2.state.data,_this2.hardcodeId);_this2.getarticles(_this2.state.data,_this2.hardcodeId);}};setTimeout(a,500);}},{key:\"getarticles\",value:function getarticles(data,id){var temp1=[];var temp2=[];var temp=this.state.friendlist;data.forEach(function(e){var a=String(e.id);if(!temp2.includes(a)&&(e.userId==id||temp.includes(String(e.userId)))){temp2.push(a);temp1.push(e);}});this.setState({articles:temp1});}},{key:\"getfriends\",value:function getfriends(data,id){var temp=[];data.forEach(function(e){var a=String(e.userId);if(!temp.includes(a)&&a!==id&&e.userId<parseInt(id)+4){temp.push(a);}});this.setState({friendlist:temp});}},{key:\"handlePost\",value:function handlePost(e){e.preventDefault();var ntitle=document.getElementById(\"posttitle\").value;var npost=document.getElementById(\"newpost\").value;var temp=_toConsumableArray(this.state.articles);var time=new Date(Date.now()).toDateString();temp.unshift({title:ntitle,body:npost,userId:this.state.userId,timestamp:time});this.setState({articles:temp});document.getElementById(\"posttitle\").value='';document.getElementById(\"newpost\").value='';}},{key:\"handleProfile\",value:function handleProfile(e){e.preventDefault();var temp={friendlist:this.state.friendlist,articles:this.state.articles};this.props.gotoprofile(temp);this.setState({toProfile:true});}},{key:\"handleLogout\",value:function handleLogout(e){e.preventDefault();this.props.userlogout();this.setState({toLanding:true});}},{key:\"handleHeadline\",value:function handleHeadline(e){var _this3=this;e.preventDefault();this.props.updateheadline(document.getElementById('headlinetext').value);setTimeout(function(){_this3.setState({headline:_this3.props.headline});},100);document.getElementById('headlinetext').value='';}},{key:\"handleClear\",value:function handleClear(e){e.preventDefault();document.getElementById('newpost').value='';document.getElementById('posttitle').value='';}},{key:\"handlefriends\",value:function handlefriends(e){e.preventDefault();var a=document.getElementById('newfriend').value;if(a!=''&&!this.state.friendlist.includes(a)){var temp=_toConsumableArray(this.state.friendlist);temp.push(document.getElementById('newfriend').value);this.setState({friendlist:temp});document.getElementById('newfriend').value='';}}},{key:\"handleunfriends\",value:function handleunfriends(e){e.preventDefault();var temp=_toConsumableArray(this.state.friendlist);var theindex=temp.indexOf(e.target.id);temp.splice(theindex,1);this.setState({friendlist:temp});}},{key:\"render\",value:function render(){var _this4=this;if(this.state.toProfile){return/*#__PURE__*/React.createElement(Redirect,{to:\"/Profile\"});}if(this.state.toLanding){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"jumbotron text-center\"},/*#__PURE__*/React.createElement(\"h1\",null,\" Hello! \",this.state.userId,\"!Welcome to your zone!\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-4 col-md-4 col-sm-4 col-xs-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",type:\"submit\",onClick:this.handleLogout},\"Logout\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-offset-4 col-md-6\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",type:\"submit\",onClick:this.handleProfile},\"Profile\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(Avatar,{round:true,src:smallimg}),/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-lighter\"},this.state.userId))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-bold\"},\"Status: \",this.state.headline))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"headlinetext\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:this.handleHeadline},\"Change\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-8 col-md-8 col-sm-8 col-xs-8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"textarea\",{className:\"form-control\",rows:\"1\",id:\"posttitle\",placeholder:\"Post title\"}),/*#__PURE__*/React.createElement(\"textarea\",{className:\"form-control\",rows:\"5\",id:\"newpost\",placeholder:\"Post your day!\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary center\",type:\"submit\",onClick:this.handlePost},\"Post\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary center\",type:\"submit\",onClick:this.handleClear},\"Clear\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"p\",null,\"Upload your picture:\",/*#__PURE__*/React.createElement(\"input\",{type:\"file\"}))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"p\",null,\"Search bar\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-4 col-md-4 col-sm-4 col-xs-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},this.state.friendlist.map(function(x,i){return/*#__PURE__*/React.createElement(\"div\",{key:i,className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(Avatar,{round:true,src:smallimg}),/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-lighter\"},\"user \",x),/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-bold\"},\"Status: I am user \",x),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-danger\",id:x,onClick:_this4.handleunfriends},\"Unfollow\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null)));}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"newfriend\",placeholder:\"add a new friend\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:this.handlefriends},\"Follow\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-8 col-md-8 col-sm-8 col-xs-8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"list-group list-group-flush\"},this.state.articles.map(function(x,i){return/*#__PURE__*/React.createElement(\"li\",{key:i,className:\"list-group-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-bold\"},x.title),/*#__PURE__*/React.createElement(\"img\",{src:bigimg}),/*#__PURE__*/React.createElement(\"p\",{className:\"font-italic\"},x.body),/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-bold\"},\"Published by: User \",x.userId,\" \",x.timestamp===undefined?'':'on '+String(x.timestamp)),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-secondary\"},\"Edit\"),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-warning\"},\"Comment\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null)));}))))));}}]);return Main;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{userId:state.userId,headline:state.headline,baseinfo:state.baseinfo,data:state.data,friendlist:state.friendlist,articles:state.articles};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{requestdata:function requestdata(data){return dispatch(_requestdata(data));},userlogout:function userlogout(){return dispatch(_userlogout());},updateheadline:function updateheadline(headline){return dispatch(_updateheadline(headline));},gotoprofile:function gotoprofile(input){return dispatch(_gotoprofile(input));}};};export default connect(mapStateToProps,mapDispatchToProps)(Main);","map":{"version":3,"sources":["/Users/alexwan/Documents/GitHub/hw4-BochengWan123/hw4/src/Component/Main/Main.js"],"names":["React","connect","Redirect","userlogout","requestdata","updateheadline","gotoprofile","Avatar","bigimg","smallimg","Main","props","handleProfile","bind","handleLogout","handleHeadline","handleClear","getfriends","getarticles","handlefriends","handleunfriends","handlePost","console","log","state","userId","friendlist","baseinfo","data","toProfile","toLanding","headline","articles","hardcodeId","fetch","then","res","json","a","setState","length","setTimeout","id","temp1","temp2","temp","forEach","e","String","includes","push","parseInt","preventDefault","ntitle","document","getElementById","value","npost","time","Date","now","toDateString","unshift","title","body","timestamp","theindex","indexOf","target","splice","map","x","i","undefined","Component","mapStateToProps","mapDispatchToProps","dispatch","input"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from 'react-redux';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {Redirect} from \"react-router-dom\";\nimport {userlogout,requestdata,updateheadline,gotoprofile} from \"../../actions\";\nimport Avatar from 'react-avatar';\nimport './img.css';\nimport {bigimg, smallimg} from \"../../actions\";\n\n\nclass Main extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleProfile = this.handleProfile.bind(this);\n        this.handleLogout = this.handleLogout.bind(this);\n        this.handleHeadline = this.handleHeadline.bind(this);\n        this.handleClear = this.handleClear.bind(this);\n        this.getfriends = this.getfriends.bind(this);\n        this.getarticles = this.getarticles.bind(this);\n        this.handlefriends = this.handlefriends.bind(this);\n        this.handleunfriends = this.handleunfriends.bind(this);\n        this.handlePost = this.handlePost.bind(this);\n        console.log(this.props);\n        this.state = {\n            userId: this.props.userId,\n            friendlist: this.props.friendlist,\n            baseinfo: this.props.baseinfo,\n            data: this.props.data,\n            toProfile: false,\n            toLanding: false,\n            headline: this.props.headline,\n            articles: this.props.articles\n        }\n\n        this.hardcodeId = '1';\n\n\n        }\n\n\n\n        componentDidMount()\n        {\n            fetch(`https://jsonplaceholder.typicode.com/posts`).then(res => res.json()).then(res =>\n                this.props.requestdata(res));\n\n                let a = () => {\n\n                    this.setState({data: this.props.data});\n                    console.log(this.state)\n\n                    if(this.state.friendlist.length == 0) {\n\n                        this.getfriends(this.state.data, this.hardcodeId);\n                        this.getarticles(this.state.data, this.hardcodeId);\n                    }\n                    }\n\n            setTimeout(a, 500)\n        }\n\n        getarticles(data,id){\n            let temp1 = [];\n            let temp2 = [];\n            let temp = this.state.friendlist;\n            data.forEach(function(e){\n                let a = String(e.id);\n                if(!temp2.includes(a) && (e.userId==id || temp.includes(String(e.userId)))){\n                    temp2.push(a);\n                    temp1.push(e);\n                }\n            });\n            this.setState({articles:temp1});\n\n        }\n\n        getfriends(data,id){\n                let temp = [];\n\n                data.forEach(function(e){\n                    let a = String(e.userId);\n                    if((!temp.includes(a)&&(a!==id)&&(e.userId<(parseInt(id)+4)))){\n                        temp.push(a);\n                    }\n                })\n                this.setState({friendlist:temp});\n        }\n\n        handlePost(e){\n            e.preventDefault();\n            let ntitle = document.getElementById(\"posttitle\").value;\n            let npost = document.getElementById(\"newpost\").value;\n            let temp = [...this.state.articles];\n            let time = new Date(Date.now()).toDateString();\n            temp.unshift({title:ntitle,body:npost,userId:this.state.userId,timestamp:time});\n            this.setState({articles:temp});\n            document.getElementById(\"posttitle\").value='';\n            document.getElementById(\"newpost\").value='';\n\n        }\n        handleProfile(e)\n        {\n            e.preventDefault();\n            let temp = {friendlist: this.state.friendlist,articles: this.state.articles}\n            this.props.gotoprofile(temp);\n            this.setState({toProfile: true});\n        }\n        handleLogout(e)\n        {\n            e.preventDefault();\n            this.props.userlogout();\n            this.setState({toLanding: true})\n        }\n\n        handleHeadline(e)\n        {\n            e.preventDefault();\n            this.props.updateheadline(document.getElementById('headlinetext').value);\n            setTimeout(() => {\n                this.setState({headline: this.props.headline})\n            }, 100);\n            document.getElementById('headlinetext').value = '';\n\n        }\n\n        handleClear(e)\n        {\n            e.preventDefault();\n            document.getElementById('newpost').value = '';\n            document.getElementById('posttitle').value = '';\n        }\n\n        handlefriends(e){\n            e.preventDefault();\n            let a = document.getElementById('newfriend').value;\n            if(a!='' && !this.state.friendlist.includes(a)) {\n                let temp = [...this.state.friendlist];\n                temp.push(document.getElementById('newfriend').value);\n                this.setState({friendlist: temp});\n                document.getElementById('newfriend').value = '';\n            }\n\n        }\n\n        handleunfriends(e){\n            e.preventDefault()\n            let temp = [...this.state.friendlist];\n\n\n            let theindex = temp.indexOf(e.target.id);\n\n            temp.splice(theindex,1);\n\n            this.setState({friendlist: temp});\n\n        }\n\n\n        render()\n        {\n            if (this.state.toProfile) {\n                return (\n\n                    <Redirect to='/Profile'/>\n\n                )\n            }\n\n            if (this.state.toLanding) {\n                return (\n                    <Redirect to='/'/>\n                )\n            }\n\n            return (\n                <div>\n\n                    <div className=\"jumbotron text-center\">\n                        <h1> Hello! {this.state.userId}!Welcome to your zone!</h1>\n                    </div>\n                    <div className='row'>\n                        <div className=\"col-lg-4 col-md-4 col-sm-4 col-xs-4\">\n                            <div className='card'>\n\n                                <div className='row'>\n                                    <div className='col-md-6'>\n                                        <button className=\"btn btn-primary\" type='submit'\n                                                onClick={this.handleLogout}>Logout\n                                        </button>\n                                    </div>\n                                    <div className='col-md-offset-4 col-md-6'>\n                                        <button className=\"btn btn-primary\" type='submit'\n                                                onClick={this.handleProfile}>Profile\n                                        </button>\n                                    </div>\n                                </div>\n\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        <Avatar round src={smallimg}/>\n                                        <p className=\"font-weight-lighter\">{this.state.userId}</p>\n                                    </div>\n                                </div>\n\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        <p className=\"font-weight-bold\">Status: {this.state.headline}</p>\n                                    </div>\n                                </div>\n\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        <input type='text' id='headlinetext'/>\n                                        <br/>\n                                        <button type='submit' onClick={this.handleHeadline}>Change</button>\n\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                        <div className=\"col-lg-8 col-md-8 col-sm-8 col-xs-8\">\n                            <div className='card'>\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        <textarea className=\"form-control\" rows=\"1\" id='posttitle'\n                                                  placeholder='Post title'></textarea>\n                                    <textarea className=\"form-control\" rows=\"5\" id='newpost'\n                                              placeholder='Post your day!'></textarea>\n                                    </div>\n                                </div>\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        <button className=\"btn btn-primary center\" type='submit' onClick={this.handlePost}>Post</button>\n                                        <button className=\"btn btn-primary center\" type='submit'\n                                                onClick={this.handleClear}>Clear\n                                        </button>\n                                    </div>\n                                </div>\n\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        <p>Upload your picture:<input type='file'/></p>\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n                    <div className='row'>\n                        <div className='col-md-12'>\n\n                            <p>Search bar</p>\n                        </div>\n\n                    </div>\n\n                    <div className='row'>\n                        <div className=\"col-lg-4 col-md-4 col-sm-4 col-xs-4\">\n                            <div className='card'>\n                                {this.state.friendlist.map((x,i)=>\n                                    <div key={i} className='row'>\n                                        <div className='col-md-12'>\n                                            <Avatar round src={smallimg}/>\n                                            <p className=\"font-weight-lighter\">user {x}</p>\n                                            <p className=\"font-weight-bold\">Status: I am user {x}</p>\n                                            <button type='submit' className = 'btn btn-danger' id = {x} onClick={this.handleunfriends}>Unfollow</button>\n                                            <br></br>\n                                            <br></br>\n                                        </div>\n                                    </div>)}\n\n\n                                    <br></br>\n                                    <div className = 'row'>\n                                        <div className='col-md-12'>\n                                            <input type='text' id='newfriend' placeholder = 'add a new friend'/>\n                                        </div>\n                                        <div className='col-md-12'>\n                                            <button type='submit' className = 'btn btn-primary' onClick={this.handlefriends}>Follow</button>\n                                        </div>\n                                    </div>\n                            </div>\n                        </div>\n\n                        <div className=\"col-lg-8 col-md-8 col-sm-8 col-xs-8\">\n                            <div className='card'>\n                                <ul className=\"list-group list-group-flush\">\n                                {this.state.articles.map((x,i)=>\n                                    <li key={i} className=\"list-group-item\">\n                                        <div className='col-md-12'>\n                                            <p className=\"font-weight-bold\">{x.title}</p>\n                                            <img src={bigimg}/>\n                                            <p className=\"font-italic\">{x.body}</p>\n                                            <p className=\"font-weight-bold\">Published by: User {x.userId} {x.timestamp === undefined?'': ('on '+String(x.timestamp))}</p>\n                                            <button type='submit' className = 'btn btn-secondary'>Edit</button>\n                                            <button type='submit' className = 'btn btn-warning'>Comment</button>\n                                            <br></br>\n                                            <br></br>\n                                        </div>\n                                    </li>)}\n                                    </ul>\n\n                            </div>\n                        </div>\n                    </div>\n\n\n                </div>\n\n            )\n\n        }\n\n    }\n\n\nconst mapStateToProps = (state) => {\n\n    return {\n        userId:state.userId,\n        headline:state.headline,\n        baseinfo:state.baseinfo,\n        data:state.data,\n        friendlist: state.friendlist,\n        articles:state.articles\n    }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        requestdata: (data)=> dispatch(requestdata(data)),\n        userlogout: () =>dispatch(userlogout()),\n        updateheadline:(headline)=>dispatch(updateheadline(headline)),\n        gotoprofile: (input)=>dispatch(gotoprofile(input))\n\n    }\n};\n\n\nexport default connect(mapStateToProps,mapDispatchToProps)(Main)"]},"metadata":{},"sourceType":"module"}