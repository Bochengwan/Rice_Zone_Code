{"ast":null,"code":"import _toConsumableArray from\"/Users/alexwan/Documents/GitHub/hw5-BochengWan123/hw5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/alexwan/Documents/GitHub/hw5-BochengWan123/hw5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/alexwan/Documents/GitHub/hw5-BochengWan123/hw5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alexwan/Documents/GitHub/hw5-BochengWan123/hw5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/alexwan/Documents/GitHub/hw5-BochengWan123/hw5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/alexwan/Documents/GitHub/hw5-BochengWan123/hw5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/alexwan/Documents/GitHub/hw5-BochengWan123/hw5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from'react-redux';import'bootstrap/dist/css/bootstrap.min.css';import{Redirect}from\"react-router-dom\";import{userlogout as _userlogout,updateheadline as _updateheadline,gotoprofile as _gotoprofile}from\"../../actions\";import Avatar from'react-avatar';import'./img.css';import{bigimg,smallimg}from\"../../actions\";var Main=/*#__PURE__*/function(_React$Component){_inherits(Main,_React$Component);var _super=_createSuper(Main);function Main(props){var _this;_classCallCheck(this,Main);_this=_super.call(this,props);_this.handleProfile=_this.handleProfile.bind(_assertThisInitialized(_this));_this.handleLogout=_this.handleLogout.bind(_assertThisInitialized(_this));_this.handleHeadline=_this.handleHeadline.bind(_assertThisInitialized(_this));_this.handleClear=_this.handleClear.bind(_assertThisInitialized(_this));_this.getfriends=_this.getfriends.bind(_assertThisInitialized(_this));_this.getarticles=_this.getarticles.bind(_assertThisInitialized(_this));_this.handlecomments=_this.handlecomments.bind(_assertThisInitialized(_this));_this.handlefriends=_this.handlefriends.bind(_assertThisInitialized(_this));_this.handleunfriends=_this.handleunfriends.bind(_assertThisInitialized(_this));_this.handlePost=_this.handlePost.bind(_assertThisInitialized(_this));_this.search=_this.search.bind(_assertThisInitialized(_this));_this.state={userId:_this.props.userId,friendlist:_this.props.friendlist,baseinfo:_this.props.baseinfo,data:_this.props.data,toProfile:false,toLanding:false,headline:localStorage.getItem(_this.props.userId)===null?_this.props.headline:localStorage.getItem(_this.props.userId),articles:_this.props.articles,searchcontent:[],userscomment:[]};_this.errorMessage='';var temp=_this.props.usergroup;_this.theuser=temp.find(function(element){return element[0]===_this.state.userId;});if(_this.theuser===undefined){_this.hardcodeId=1;}else{_this.hardcodeId=_this.theuser[5];}return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//fetch(`https://jsonplaceholder.typicode.com/posts`).then(res => res.json()).then(res =>\n//this.props.requestdata(res));\nvar a=function a(){_this2.setState({data:_this2.props.data});if(_this2.state.friendlist.length==0){_this2.getfriends(_this2.props.usergroup,_this2.hardcodeId);_this2.getarticles(_this2.props.data);}};setTimeout(a,500);}},{key:\"handlecomments\",value:function handlecomments(e){e.preventDefault();var commentid=parseInt(e.target.id);var commentstatus=this.state.userscomment;commentstatus[commentid]=!commentstatus[commentid];this.setState({userscomment:commentstatus});}},{key:\"getarticles\",value:function getarticles(data){var temp1=[];var temp2=[];var temp=this.state.friendlist;var usergroup=this.props.usergroup;var theuser=this.props.userId;data.forEach(function(e){var a=e.id;var poster=usergroup.find(function(element){return element[5]==e.userId;});var isUser=poster[0]==theuser;var isFriend=temp.includes(poster[0]);if(!temp2.includes(a)&&(isUser||isFriend)){temp2.push(a);temp1.push(_objectSpread(_objectSpread({},e),{},{userId:poster[0]}));}});var commentstatus=new Array(temp1.length).fill(false);this.setState({userscomment:commentstatus});this.setState({articles:temp1});}},{key:\"getfriends\",value:function getfriends(data,id){var _this3=this;var temp=[];var temp1=[];data.forEach(function(e){var a=e[5];if(!temp.includes(a)&&a!==id&&a<parseInt(id)+4&&a>id){temp.push(a);var user=data.find(function(element){return element[5]==a;});temp1.push(user[0]);}});if(id>7){(function(){var a=1;for(;a<(id+4)%10;a++){console.log(temp1);temp.push(a);var user=_this3.props.usergroup.find(function(element){return element[5]==a;});temp1.push(user[0]);}})();}this.setState({friendlist:temp1});}},{key:\"handlePost\",value:function handlePost(e){e.preventDefault();var ntitle=document.getElementById(\"posttitle\").value;var npost=document.getElementById(\"newpost\").value;var temp=_toConsumableArray(this.state.articles);var time=new Date(Date.now()).toDateString();temp.unshift({title:ntitle,body:npost,userId:this.state.userId,timestamp:time});this.setState({articles:temp});document.getElementById(\"posttitle\").value='';document.getElementById(\"newpost\").value='';}},{key:\"handleProfile\",value:function handleProfile(e){e.preventDefault();var temp={friendlist:this.state.friendlist,articles:this.state.articles,userId:this.props.userId};this.props.gotoprofile(temp);this.setState({toProfile:true});}},{key:\"handleLogout\",value:function handleLogout(e){e.preventDefault();this.props.userlogout();this.setState({toLanding:true});}},{key:\"handleHeadline\",value:function handleHeadline(e){e.preventDefault();var headline=document.getElementById('headlinetext').value;this.props.updateheadline(headline);//setTimeout(() => {\nthis.setState({headline:headline});//}, 100);\nlocalStorage.setItem(this.props.userId,headline);document.getElementById('headlinetext').value='';}},{key:\"handleClear\",value:function handleClear(e){e.preventDefault();document.getElementById('newpost').value='';document.getElementById('posttitle').value='';}},{key:\"handlefriends\",value:function handlefriends(e){var _this4=this;e.preventDefault();this.errorMessage='';var a=document.getElementById('newfriend').value;var adding=this.props.usergroup.find(function(element){return element[0]==a;});if(a!=''&&!this.state.friendlist.includes(a)&&a!=this.props.userId&&!(adding===undefined)){var temp=_toConsumableArray(this.state.friendlist);temp.push(document.getElementById('newfriend').value);this.setState({friendlist:temp});document.getElementById('newfriend').value='';}else if(this.state.friendlist.includes(a)||a==this.props.userId){this.errorMessage='Cannot add followed user or yourself!';}else if(adding===undefined){this.errorMessage='Not an existing user!';}this.setState({errorMessage:this.errorMessage});setTimeout(function(){_this4.getarticles(_this4.props.data);},50);}},{key:\"handleunfriends\",value:function handleunfriends(e){var _this5=this;e.preventDefault();var temp=_toConsumableArray(this.state.friendlist);var theindex=temp.indexOf(e.target.id);temp.splice(theindex,1);this.setState({friendlist:temp});setTimeout(function(){_this5.getarticles(_this5.props.data);},50);}},{key:\"search\",value:function search(event){event.preventDefault();var temp=[];this.state.articles.forEach(function(e){if(e.userId.includes(event.target.value)||e.body.includes(event.target.value)){temp.unshift(e);}});if(event.target.value==''){temp=[];}this.setState({searchcontent:temp});}},{key:\"render\",value:function render(){var _this6=this;if(this.state.toProfile){return/*#__PURE__*/React.createElement(Redirect,{to:\"/Profile\"});}if(this.state.toLanding){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"jumbotron text-center\"},/*#__PURE__*/React.createElement(\"h1\",null,\" Hello! \",this.state.userId,\"!Welcome to your zone!\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-4 col-md-4 col-sm-4 col-xs-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",type:\"submit\",onClick:this.handleLogout},\"Logout\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-offset-4 col-md-6\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",type:\"submit\",onClick:this.handleProfile},\"Profile\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(Avatar,{round:true,src:smallimg}),/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-lighter\"},this.state.userId))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"p\",{\"data-testid\":\"custom-element\",className:\"font-weight-bold\"},\"Status: \",this.state.headline))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"headlinetext\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:this.handleHeadline},\"Change\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-8 col-md-8 col-sm-8 col-xs-8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"textarea\",{className:\"form-control\",rows:\"1\",id:\"posttitle\",placeholder:\"Post title\"}),/*#__PURE__*/React.createElement(\"textarea\",{className:\"form-control\",rows:\"5\",id:\"newpost\",placeholder:\"Post your day!\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary center\",type:\"submit\",onClick:this.handlePost},\"Post\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary center\",type:\"submit\",onClick:this.handleClear},\"Clear\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"p\",null,\"Upload your picture:\",/*#__PURE__*/React.createElement(\"input\",{type:\"file\"}))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"p\",null,\"Search bar: \",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",onChange:this.search,placeholder:\"For now, can only search by userId\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},this.state.searchcontent==[]?'':this.state.searchcontent.map(function(x,i){return/*#__PURE__*/React.createElement(\"div\",{key:i,className:\"row col-md-12\"},/*#__PURE__*/React.createElement(\"p\",null,\"  The user is \",x.userId,\" and title is \",x.title,\".The post is \",x.body));})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-4 col-md-4 col-sm-4 col-xs-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},!(this.errorMessage==='')?/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row alert-danger\"},this.errorMessage)):'',this.state.friendlist.map(function(x,i){return/*#__PURE__*/React.createElement(\"div\",{key:i,className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(Avatar,{round:true,src:smallimg}),/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-lighter\"},\"user \",x),/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-bold\"},\"Status: \",localStorage.getItem(x)===null?'I am user '+x:localStorage.getItem(x)),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-danger\",id:x,onClick:_this6.handleunfriends},\"Unfollow\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null)));}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"newfriend\",placeholder:\"add a new friend\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:this.handlefriends},\"Follow\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-8 col-md-8 col-sm-8 col-xs-8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"list-group list-group-flush\"},this.state.articles.map(function(x,i){return/*#__PURE__*/React.createElement(\"li\",{key:i,className:\"list-group-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-bold\"},x.title),/*#__PURE__*/React.createElement(\"img\",{src:bigimg}),/*#__PURE__*/React.createElement(\"p\",{className:\"font-italic\"},x.body),/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-bold\"},\"Published by: User \",x.userId,\" \",x.timestamp===undefined?'':'on '+String(x.timestamp)),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-secondary\"},\"Edit\"),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-warning\",id:x.id,onClick:_this6.handlecomments},\"Comment\"),_this6.state.userscomment[x.id]?/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},_this6.props.comments.slice((x.id-1)*5+1,(x.id-1)*5+6).map(function(y,j){return/*#__PURE__*/React.createElement(\"div\",{key:j,className:\"list-group-item\"},/*#__PURE__*/React.createElement(\"p\",{className:\"font-italic\"},y.body,\" \"),/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-bold\"},\"Published by: \",y.name));})):'',/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null)));}))))));}}]);return Main;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{userId:state.userId,headline:state.headline,baseinfo:state.baseinfo,data:state.data,friendlist:state.friendlist,articles:state.articles,usergroup:state.usergroup,comments:state.comments};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{userlogout:function userlogout(){return dispatch(_userlogout());},updateheadline:function updateheadline(headline){return dispatch(_updateheadline(headline));},gotoprofile:function gotoprofile(input){return dispatch(_gotoprofile(input));}};};export default connect(mapStateToProps,mapDispatchToProps)(Main);","map":{"version":3,"sources":["/Users/alexwan/Documents/GitHub/hw5-BochengWan123/hw5/src/Component/Main/Main.js"],"names":["React","connect","Redirect","userlogout","updateheadline","gotoprofile","Avatar","bigimg","smallimg","Main","props","handleProfile","bind","handleLogout","handleHeadline","handleClear","getfriends","getarticles","handlecomments","handlefriends","handleunfriends","handlePost","search","state","userId","friendlist","baseinfo","data","toProfile","toLanding","headline","localStorage","getItem","articles","searchcontent","userscomment","errorMessage","temp","usergroup","theuser","find","element","undefined","hardcodeId","a","setState","length","setTimeout","e","preventDefault","commentid","parseInt","target","id","commentstatus","temp1","temp2","forEach","poster","isUser","isFriend","includes","push","Array","fill","user","console","log","ntitle","document","getElementById","value","npost","time","Date","now","toDateString","unshift","title","body","timestamp","setItem","adding","theindex","indexOf","splice","event","map","x","i","String","comments","slice","y","j","name","Component","mapStateToProps","mapDispatchToProps","dispatch","input"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from 'react-redux';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {Redirect} from \"react-router-dom\";\nimport {userlogout,updateheadline,gotoprofile} from \"../../actions\";\nimport Avatar from 'react-avatar';\nimport './img.css';\nimport {bigimg, smallimg} from \"../../actions\";\n\n\nclass Main extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleProfile = this.handleProfile.bind(this);\n        this.handleLogout = this.handleLogout.bind(this);\n        this.handleHeadline = this.handleHeadline.bind(this);\n        this.handleClear = this.handleClear.bind(this);\n        this.getfriends = this.getfriends.bind(this);\n        this.getarticles = this.getarticles.bind(this);\n        this.handlecomments = this.handlecomments.bind(this);\n        this.handlefriends = this.handlefriends.bind(this);\n        this.handleunfriends = this.handleunfriends.bind(this);\n        this.handlePost = this.handlePost.bind(this);\n        this.search = this.search.bind(this);\n\n\n\n        this.state = {\n            userId: this.props.userId,\n            friendlist: this.props.friendlist,\n            baseinfo: this.props.baseinfo,\n            data: this.props.data,\n            toProfile: false,\n            toLanding: false,\n            headline: localStorage.getItem(this.props.userId) === null ?this.props.headline:localStorage.getItem(this.props.userId),\n            articles: this.props.articles,\n            searchcontent : [],\n            userscomment:[]\n\n        }\n        this.errorMessage='';\n        let temp = this.props.usergroup\n        this.theuser = temp.find(element=>element[0]===this.state.userId)\n        if(this.theuser === undefined) {\n            this.hardcodeId = 1;\n        } else {\n            this.hardcodeId = this.theuser[5];\n        }\n\n        }\n\n\n\n        componentDidMount()\n        {   //fetch(`https://jsonplaceholder.typicode.com/posts`).then(res => res.json()).then(res =>\n            //this.props.requestdata(res));\n            let a = () => {\n                    this.setState({data: this.props.data});\n                    if(this.state.friendlist.length == 0) {\n\n                        this.getfriends(this.props.usergroup, this.hardcodeId);\n                        this.getarticles(this.props.data);\n\n                        }\n                    }\n            setTimeout(a, 500)\n\n        }\n\n        handlecomments(e){\n            e.preventDefault();\n            let commentid = parseInt(e.target.id)\n\n\n            let commentstatus = this.state.userscomment\n            commentstatus[commentid] = !commentstatus[commentid]\n\n            this.setState({userscomment:commentstatus})\n\n\n        }\n\n        getarticles(data){\n            let temp1 = [];\n            let temp2 = [];\n            let temp = this.state.friendlist;\n            let usergroup = this.props.usergroup;\n            let theuser = this.props.userId;\n            data.forEach(function(e){\n                let a = e.id;\n                let poster = usergroup.find(element=>(element[5]==e.userId))\n                let isUser = poster[0]==theuser\n                let isFriend = temp.includes(poster[0])\n                if(!temp2.includes(a) && (isUser || isFriend)) {\n                    temp2.push(a);\n                    temp1.push({...e,userId:poster[0]});\n                }\n            });\n            let commentstatus = new Array(temp1.length).fill(false);\n            this.setState({userscomment:commentstatus})\n            this.setState({articles:temp1});\n\n        }\n\n        getfriends(data,id){\n                let temp = [];\n                let temp1 = [];\n\n\n                data.forEach(function(e){\n                    let a = e[5];\n                    if((!temp.includes(a)&&(a!==id)&&(a<(parseInt(id)+4))&&(a>id))){\n                        temp.push(a);\n                        let user = data.find(element=>element[5]==a)\n                        temp1.push(user[0])\n\n                    }\n                })\n\n            if(id>7){\n                let a = 1\n                for(;a<(id+4)%10;a++){\n                    console.log(temp1)\n                    temp.push(a);\n                    let user = this.props.usergroup.find(element=>element[5]==a)\n                    temp1.push(user[0])\n                }\n            }\n                this.setState({friendlist:temp1});\n        }\n\n        handlePost(e){\n            e.preventDefault();\n            let ntitle = document.getElementById(\"posttitle\").value;\n            let npost = document.getElementById(\"newpost\").value;\n            let temp = [...this.state.articles];\n            let time = new Date(Date.now()).toDateString();\n            temp.unshift({title:ntitle,body:npost,userId:this.state.userId,timestamp:time});\n            this.setState({articles:temp});\n            document.getElementById(\"posttitle\").value='';\n            document.getElementById(\"newpost\").value='';\n\n        }\n        handleProfile(e)\n        {\n            e.preventDefault();\n            let temp = {friendlist: this.state.friendlist,articles: this.state.articles,userId:this.props.userId}\n            this.props.gotoprofile(temp);\n            this.setState({toProfile: true});\n        }\n        handleLogout(e)\n        {\n            e.preventDefault();\n            this.props.userlogout();\n            this.setState({toLanding: true})\n        }\n\n        handleHeadline(e)\n        {\n            e.preventDefault();\n            let headline = document.getElementById('headlinetext').value\n            this.props.updateheadline(headline);\n            //setTimeout(() => {\n                this.setState({headline: headline})\n            //}, 100);\n\n\n            localStorage.setItem(this.props.userId,headline)\n            document.getElementById('headlinetext').value = '';\n\n        }\n\n        handleClear(e)\n        {\n            e.preventDefault();\n            document.getElementById('newpost').value = '';\n            document.getElementById('posttitle').value = '';\n        }\n\n        handlefriends(e){\n            e.preventDefault();\n            this.errorMessage = ''\n            let a = document.getElementById('newfriend').value;\n            let adding =  this.props.usergroup.find(element=>element[0]==a)\n            if(a!='' && !this.state.friendlist.includes(a) && a!=this.props.userId && !(adding === undefined)) {\n                let temp = [...this.state.friendlist];\n                temp.push(document.getElementById('newfriend').value);\n                this.setState({friendlist: temp});\n                document.getElementById('newfriend').value = '';\n            } else if (this.state.friendlist.includes(a) || a == this.props.userId){\n                this.errorMessage = 'Cannot add followed user or yourself!'\n            } else if (adding === undefined){\n                this.errorMessage = 'Not an existing user!'\n            }\n            this.setState({errorMessage:this.errorMessage})\n            setTimeout(()=>{this.getarticles(this.props.data)},50);\n\n        }\n\n        handleunfriends(e){\n            e.preventDefault()\n            let temp = [...this.state.friendlist];\n            let theindex = temp.indexOf(e.target.id);\n            temp.splice(theindex,1);\n            this.setState({friendlist: temp});\n            setTimeout(()=>{this.getarticles(this.props.data)},50);\n        }\n\n        search(event){\n            event.preventDefault();\n\n            let temp = [];\n            this.state.articles.forEach(function(e){\n                if (e.userId.includes(event.target.value) || e.body.includes(event.target.value)){\n                    temp.unshift(e);\n                }\n            })\n            if(event.target.value==''){temp=[];}\n            this.setState({searchcontent:temp});\n\n        }\n\n\n        render()\n        {\n            if (this.state.toProfile) {\n                return (\n\n                    <Redirect to='/Profile'/>\n\n                )\n            }\n\n            if (this.state.toLanding) {\n                return (\n                    <Redirect to='/'/>\n                )\n            }\n\n            return (\n                <div>\n\n                    <div className=\"jumbotron text-center\">\n                        <h1> Hello! {this.state.userId}!Welcome to your zone!</h1>\n                    </div>\n                    <div className='row'>\n                        <div className=\"col-lg-4 col-md-4 col-sm-4 col-xs-4\">\n                            <div className='card'>\n\n                                <div className='row'>\n                                    <div className='col-md-6'>\n                                        <button className=\"btn btn-primary\" type='submit'\n                                                onClick={this.handleLogout}>Logout\n                                        </button>\n                                    </div>\n                                    <div className='col-md-offset-4 col-md-6'>\n                                        <button className=\"btn btn-primary\" type='submit'\n                                                onClick={this.handleProfile}>Profile\n                                        </button>\n                                    </div>\n                                </div>\n\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        <Avatar round src={smallimg}/>\n                                        <p className=\"font-weight-lighter\">{this.state.userId}</p>\n                                    </div>\n                                </div>\n\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        <p data-testid=\"custom-element\" className=\"font-weight-bold\">Status: {this.state.headline}</p>\n                                    </div>\n                                </div>\n\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        <input type='text' id='headlinetext'/>\n                                        <br/>\n                                        <button type='submit' onClick={this.handleHeadline}>Change</button>\n\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                        <div className=\"col-lg-8 col-md-8 col-sm-8 col-xs-8\">\n                            <div className='card'>\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        <textarea className=\"form-control\" rows=\"1\" id='posttitle'\n                                                  placeholder='Post title'></textarea>\n                                    <textarea className=\"form-control\" rows=\"5\" id='newpost'\n                                              placeholder='Post your day!'></textarea>\n                                    </div>\n                                </div>\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        <button className=\"btn btn-primary center\" type='submit' onClick={this.handlePost}>Post</button>\n                                        <button className=\"btn btn-primary center\" type='submit'\n                                                onClick={this.handleClear}>Clear\n                                        </button>\n                                    </div>\n                                </div>\n\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        <p>Upload your picture:<input type='file'/></p>\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n                    <div className='row'>\n                        <div className='col-md-12'>\n\n                            <p>Search bar: <input type = 'text' onChange={this.search} placeholder='For now, can only search by userId'></input></p>\n                            <div className='card'>\n                                {this.state.searchcontent == []?'':this.state.searchcontent.map((x,i)=>\n                                    <div key={i} className='row col-md-12'>\n                                        <p>  The user is {x.userId} and title is {x.title}.The post is {x.body}</p>\n\n                                    </div>)}\n                            </div>\n                        </div>\n\n                    </div>\n\n                    <div className='row'>\n                        <div className=\"col-lg-4 col-md-4 col-sm-4 col-xs-4\">\n                            <div className='card'>\n                                {!(this.errorMessage=== '')? <div className='col-md-12'><div className= 'row alert-danger'>{this.errorMessage}</div></div>:''}\n                                {this.state.friendlist.map((x,i)=>\n                                    <div key={i} className='row'>\n                                        <div className='col-md-12'>\n                                            <Avatar round src={smallimg}/>\n                                            <p className=\"font-weight-lighter\">user {x}</p>\n                                            <p className=\"font-weight-bold\">Status: {localStorage.getItem(x)===null?'I am user '+x:localStorage.getItem(x)}</p>\n                                            <button type='submit' className = 'btn btn-danger' id = {x} onClick={this.handleunfriends}>Unfollow</button>\n                                            <br></br>\n                                            <br></br>\n                                        </div>\n                                    </div>)}\n\n\n                                    <br></br>\n                                    <div className = 'row'>\n                                        <div className='col-md-12'>\n                                            <input type='text' id='newfriend' placeholder = 'add a new friend'/>\n                                        </div>\n                                        <div className='col-md-12'>\n                                            <button type='submit' className = 'btn btn-primary' onClick={this.handlefriends}>Follow</button>\n                                        </div>\n                                    </div>\n                            </div>\n                        </div>\n\n                        <div className=\"col-lg-8 col-md-8 col-sm-8 col-xs-8\">\n                            <div className='card'>\n                                <ul className=\"list-group list-group-flush\">\n                                {this.state.articles.map((x,i)=>\n                                    <li key={i} className=\"list-group-item\">\n                                        <div className='col-md-12'>\n                                            <p className=\"font-weight-bold\">{x.title}</p>\n                                            <img src={bigimg}/>\n                                            <p className=\"font-italic\">{x.body}</p>\n                                            <p className=\"font-weight-bold\">Published by: User {x.userId} {x.timestamp === undefined?'': ('on '+String(x.timestamp))}</p>\n                                            <button type='submit' className = 'btn btn-secondary'>Edit</button>\n                                            <button type='submit' className = 'btn btn-warning' id = {x.id} onClick={this.handlecomments}>Comment</button>\n                                            {this.state.userscomment[x.id]?\n                                                <div className='card'>\n                                                    {this.props.comments.slice((x.id-1)*5+1,(x.id-1)*5+6).map((y,j)=>\n                                                        <div key = {j} className=\"list-group-item\">\n                                                            <p className=\"font-italic\">{y.body} </p>\n                                                            <p className=\"font-weight-bold\">Published by: {y.name}</p>\n                                                        </div>\n                                                    )}\n                                                </div>\n                                                    :''}\n                                            <br></br>\n                                            <br></br>\n                                        </div>\n                                    </li>)}\n                                    </ul>\n\n                            </div>\n                        </div>\n                    </div>\n\n\n                </div>\n\n            )\n\n        }\n\n    }\n\n\nconst mapStateToProps = (state) => {\n\n    return {\n        userId:state.userId,\n        headline:state.headline,\n        baseinfo:state.baseinfo,\n        data:state.data,\n        friendlist: state.friendlist,\n        articles:state.articles,\n        usergroup:state.usergroup,\n        comments:state.comments\n    }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n\n        userlogout: () =>dispatch(userlogout()),\n        updateheadline:(headline)=>dispatch(updateheadline(headline)),\n        gotoprofile: (input)=>dispatch(gotoprofile(input))\n\n    }\n};\n\n\nexport default connect(mapStateToProps,mapDispatchToProps)(Main)"]},"metadata":{},"sourceType":"module"}