{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alexwan/Documents/GitHub/final-frontend-BochengWan123/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alexwan/Documents/GitHub/final-frontend-BochengWan123/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/alexwan/Documents/GitHub/final-frontend-BochengWan123/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alexwan/Documents/GitHub/final-frontend-BochengWan123/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/alexwan/Documents/GitHub/final-frontend-BochengWan123/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/alexwan/Documents/GitHub/final-frontend-BochengWan123/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/alexwan/Documents/GitHub/final-frontend-BochengWan123/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from'react-redux';import'bootstrap/dist/css/bootstrap.min.css';import{Redirect}from\"react-router-dom\";import{userlogout as _userlogout,updateheadline as _updateheadline,gotoprofile as _gotoprofile,updateavatar as _updateavatar}from\"../../actions\";import Avatar from'react-avatar';import'./img.css';import{bigimg,smallimg}from\"../../actions\";var baseurl=new URL(\"https://ricezonefinalbocheng.herokuapp.com/\");var Main=/*#__PURE__*/function(_React$Component){_inherits(Main,_React$Component);var _super=_createSuper(Main);function Main(props){var _this;_classCallCheck(this,Main);_this=_super.call(this,props);_this.handleProfile=_this.handleProfile.bind(_assertThisInitialized(_this));_this.handleLogout=_this.handleLogout.bind(_assertThisInitialized(_this));_this.handleHeadline=_this.handleHeadline.bind(_assertThisInitialized(_this));_this.handleClear=_this.handleClear.bind(_assertThisInitialized(_this));_this.handlecomments=_this.handlecomments.bind(_assertThisInitialized(_this));_this.handlefriends=_this.handlefriends.bind(_assertThisInitialized(_this));_this.handleunfriends=_this.handleunfriends.bind(_assertThisInitialized(_this));_this.handlePost=_this.handlePost.bind(_assertThisInitialized(_this));_this.search=_this.search.bind(_assertThisInitialized(_this));_this.state={userId:_this.props.userId,friendlist:_this.props.friendlist,baseinfo:_this.props.baseinfo,data:_this.props.data,toProfile:false,toLanding:false,headline:_this.props.headline,articles:_this.props.articles,searchcontent:[],userscomment:[],cookie:_this.props.cookies,avatar:_this.props.avatar};_this.errorMessage='';var temp=_this.props.usergroup;_this.theuser=temp.find(function(element){return element[0]===_this.state.userId;});if(_this.theuser===undefined){_this.hardcodeId=1;}else{_this.hardcodeId=_this.theuser[5];}return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function componentDidMount(){//fetch(`https://jsonplaceholder.typicode.com/posts`).then(res => res.json()).then(res =>\n//this.props.requestdata(res));\nvar option={headers:{\"content-type\":\"application/json\"},method:\"GET\",credentials:\"include\"};function b(_x){return _b.apply(this,arguments);}function _b(){_b=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(x){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(baseurl+\"following\",option).then(function(res){return res.json();}).then(function(res){return x.setState({friendlist:res.following});});case 2:_context.next=4;return fetch(baseurl+\"articles\",option).then(function(res){return res.json();}).then(function(res){return x.setState({articles:res.articles});});case 4:_context.next=6;return fetch(baseurl+\"headline\",option).then(function(res){return res.json();}).then(function(res){return x.setState({headline:res.headline});});case 6:_context.next=8;return fetch(baseurl+\"avatar\",option).then(function(res){return res.json();}).then(function(res){x.setState({avatar:res.avatar});x.props.updateavatar(res.avatar);});case 8:console.log(x.state);case 9:case\"end\":return _context.stop();}}},_callee);}));return _b.apply(this,arguments);}b(this);// let a = () => {\n//         this.setState({data: this.props.data});\n//         if(this.state.friendlist.length == 0) {\n//\n//             this.getfriends(this.props.usergroup, this.hardcodeId);\n//             this.getarticles(this.props.data);\n//\n//             }\n//         }\n// setTimeout(a, 500)\n}},{key:\"handlecomments\",value:function handlecomments(e){e.preventDefault();var commentid=parseInt(e.target.id);var commentstatus=this.state.userscomment;commentstatus[commentid]=!commentstatus[commentid];this.setState({userscomment:commentstatus});}},{key:\"handlePost\",value:function handlePost(e){e.preventDefault();var npost=document.getElementById(\"newpost\").value;var option={headers:{\"content-type\":\"application/json\"},body:JSON.stringify({\"text\":npost}),method:\"POST\",credentials:\"include\"};var option1={headers:{\"content-type\":\"application/json\"},method:\"GET\",credentials:\"include\"};function b(_x2){return _b2.apply(this,arguments);}function _b2(){_b2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(x){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(baseurl+\"article\",option).then(function(res){return res.json();}).then(function(res){console.log(res);});case 2:_context2.next=4;return fetch(baseurl+\"articles\",option1).then(function(res){return res.json();}).then(function(res){x.setState({articles:res.articles});});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _b2.apply(this,arguments);};b(this);document.getElementById(\"newpost\").value='';}},{key:\"handleProfile\",value:function handleProfile(e){e.preventDefault();var temp={friendlist:this.state.friendlist,articles:this.state.articles,userId:this.props.userId};this.props.gotoprofile(temp);this.setState({toProfile:true});}},{key:\"handleLogout\",value:function handleLogout(e){e.preventDefault();var option={headers:{\"content-type\":\"application/json\"},method:\"PUT\",credentials:\"include\"};function b(_x3){return _b3.apply(this,arguments);}function _b3(){_b3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(x){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(baseurl+\"logout\",option).then(function(res){return res.json();}).then(function(res){if(res.result=='success'){x.props.userlogout();x.setState({toLanding:true});}});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return _b3.apply(this,arguments);}b(this);}},{key:\"handleHeadline\",value:function handleHeadline(e){e.preventDefault();var headline=document.getElementById('headlinetext').value;var option={headers:{\"content-type\":\"application/json\"},body:JSON.stringify({headline:headline}),method:\"PUT\",credentials:\"include\"};function b(_x4){return _b4.apply(this,arguments);}function _b4(){_b4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(x){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(baseurl+\"headline\",option).then(function(res){return res.json();}).then(function(res){x.props.updateheadline(headline);x.setState({headline:res.headline});});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return _b4.apply(this,arguments);}b(this);document.getElementById('headlinetext').value='';}},{key:\"handleClear\",value:function handleClear(e){e.preventDefault();document.getElementById('newpost').value='';}},{key:\"handlefriends\",value:function handlefriends(e){e.preventDefault();this.errorMessage='';var a=document.getElementById('newfriend').value;var option={headers:{\"content-type\":\"application/json\"},method:\"PUT\",credentials:\"include\"};function b(_x5){return _b5.apply(this,arguments);}function _b5(){_b5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(x){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return fetch(baseurl+\"following/\"+a,option).then(function(res){return res.json();}).then(function(res){return x.setState({friendlist:res.following});});case 2:case\"end\":return _context5.stop();}}},_callee5);}));return _b5.apply(this,arguments);}b(this);// let adding =  this.props.usergroup.find(element=>element[0]==a)\n// if(a!='' && !this.state.friendlist.includes(a) && a!=this.props.userId && !(adding === undefined)) {\n//     let temp = [...this.state.friendlist];\n//     temp.push(document.getElementById('newfriend').value);\n//     this.setState({friendlist: temp});\n//     document.getElementById('newfriend').value = '';\n// } else if (this.state.friendlist.includes(a) || a == this.props.userId){\n//     this.errorMessage = 'Cannot add followed user or yourself!'\n// } else if (adding === undefined){\n//     this.errorMessage = 'Not an existing user!'\n}},{key:\"handleunfriends\",value:function handleunfriends(e){var option={headers:{\"content-type\":\"application/json\"},method:\"DELETE\",credentials:\"include\"};function b(_x6){return _b6.apply(this,arguments);}function _b6(){_b6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(x){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return fetch(baseurl+\"following/\"+e.target.id,option).then(function(res){return res.json();}).then(function(res){return x.setState({friendlist:res.following});});case 2:case\"end\":return _context6.stop();}}},_callee6);}));return _b6.apply(this,arguments);}b(this);}},{key:\"search\",value:function search(event){event.preventDefault();var temp=[];this.state.articles.forEach(function(e){if(e.author.includes(event.target.value)||e.text.includes(event.target.value)){temp.unshift(e);}});if(event.target.value==''){temp=[];}this.setState({searchcontent:temp});}},{key:\"render\",value:function render(){var _this2=this;if(this.state.toProfile){return/*#__PURE__*/React.createElement(Redirect,{to:\"/Profile\"});}if(this.state.toLanding){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"jumbotron text-center\"},/*#__PURE__*/React.createElement(\"h1\",null,\" Hello! \",this.state.userId,\"!Welcome to your zone!\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-4 col-md-4 col-sm-4 col-xs-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",type:\"submit\",onClick:this.handleLogout},\"Logout\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-offset-4 col-md-6\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",type:\"submit\",onClick:this.handleProfile},\"Profile\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(Avatar,{round:true,src:this.state.avatar}),/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-lighter\"},this.state.userId))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"p\",{\"data-testid\":\"custom-element\",className:\"font-weight-bold\"},\"Status: \",this.state.headline))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"headlinetext\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:this.handleHeadline},\"Change\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-8 col-md-8 col-sm-8 col-xs-8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"textarea\",{className:\"form-control\",rows:\"5\",id:\"newpost\",placeholder:\"Post your day!\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary center\",type:\"submit\",onClick:this.handlePost},\"Post\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary center\",type:\"submit\",onClick:this.handleClear},\"Clear\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"p\",null,\"Upload your picture:\",/*#__PURE__*/React.createElement(\"input\",{type:\"file\"}))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"p\",null,\"Search bar: \",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",onChange:this.search,placeholder:\"For now, can only search by userId\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},this.state.searchcontent==[]?'':this.state.searchcontent.map(function(x,i){return/*#__PURE__*/React.createElement(\"div\",{key:i,className:\"row col-md-12\"},/*#__PURE__*/React.createElement(\"p\",null,\"  The user is \",x.author,\" and is post on \",x.date,\".The post content is \\\"\",x.text,\"\\\"\"));})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-4 col-md-4 col-sm-4 col-xs-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},!(this.errorMessage==='')?/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row alert-danger\"},this.errorMessage)):'',this.state.friendlist.map(function(x,i){return/*#__PURE__*/React.createElement(\"div\",{key:i,className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(Avatar,{round:true,src:smallimg}),/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-lighter\"},\"user \",x),/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-bold\"},\"Status: \",localStorage.getItem(x)===null?'I am user '+x:localStorage.getItem(x)),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-danger\",id:x,onClick:_this2.handleunfriends},\"Unfollow\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null)));}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"newfriend\",placeholder:\"add a new friend\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:this.handlefriends},\"Follow\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-8 col-md-8 col-sm-8 col-xs-8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"list-group list-group-flush\"},this.state.articles.map(function(x,i){return/*#__PURE__*/React.createElement(\"li\",{key:i,className:\"list-group-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-bold\"}),/*#__PURE__*/React.createElement(\"img\",{src:x.img}),/*#__PURE__*/React.createElement(\"p\",{className:\"font-italic\"},x.text),/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-bold\"},\"Published by: User \",x.author,\" on \",x.date,\" \"),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-secondary\"},\"Edit\"),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-warning\",id:x.id,onClick:_this2.handlecomments},\"Comment\"),_this2.state.userscomment[x.id]?/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},x.comment.map(function(y,j){return/*#__PURE__*/React.createElement(\"div\",{key:j,className:\"list-group-item\"},/*#__PURE__*/React.createElement(\"p\",{className:\"font-italic\"},y.text,\" \"),/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-bold\"},\"Published by: \",y.author,\" on \",y.date));})):'',/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null)));}))))));}}]);return Main;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{userId:state.userId,headline:state.headline,baseinfo:state.baseinfo,data:state.data,friendlist:state.friendlist,articles:state.articles,usergroup:state.usergroup,comments:state.comments,avatar:state.avatar};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{userlogout:function userlogout(){return dispatch(_userlogout());},updateheadline:function updateheadline(headline){return dispatch(_updateheadline(headline));},gotoprofile:function gotoprofile(input){return dispatch(_gotoprofile(input));},updateavatar:function updateavatar(avatar){return dispatch(_updateavatar(avatar));}};};export default connect(mapStateToProps,mapDispatchToProps)(Main);","map":{"version":3,"sources":["/Users/alexwan/Documents/GitHub/final-frontend-BochengWan123/frontend/src/Component/Main/Main.js"],"names":["React","connect","Redirect","userlogout","updateheadline","gotoprofile","updateavatar","Avatar","bigimg","smallimg","baseurl","URL","Main","props","handleProfile","bind","handleLogout","handleHeadline","handleClear","handlecomments","handlefriends","handleunfriends","handlePost","search","state","userId","friendlist","baseinfo","data","toProfile","toLanding","headline","articles","searchcontent","userscomment","cookie","cookies","avatar","errorMessage","temp","usergroup","theuser","find","element","undefined","hardcodeId","option","headers","method","credentials","b","x","fetch","then","res","json","setState","following","console","log","e","preventDefault","commentid","parseInt","target","id","commentstatus","npost","document","getElementById","value","body","JSON","stringify","option1","result","a","event","forEach","author","includes","text","unshift","map","i","date","localStorage","getItem","img","comment","y","j","Component","mapStateToProps","comments","mapDispatchToProps","dispatch","input"],"mappings":"iyCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAO,sCAAP,CACA,OAAQC,QAAR,KAAuB,kBAAvB,CACA,OAAQC,UAAU,GAAVA,CAAAA,WAAR,CAAmBC,cAAc,GAAdA,CAAAA,eAAnB,CAAkCC,WAAW,GAAXA,CAAAA,YAAlC,CAA8CC,YAAY,GAAZA,CAAAA,aAA9C,KAAiE,eAAjE,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,MAAO,WAAP,CACA,OAAQC,MAAR,CAAgBC,QAAhB,KAA+B,eAA/B,CACA,GAAMC,CAAAA,OAAO,CAAG,GAAIC,CAAAA,GAAJ,CAAQ,6CAAR,CAAhB,C,GAGMC,CAAAA,I,wGACF,cAAYC,KAAZ,CAAmB,sCACf,uBAAMA,KAAN,EACA,MAAKC,aAAL,CAAqB,MAAKA,aAAL,CAAmBC,IAAnB,+BAArB,CACA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBD,IAAlB,+BAApB,CACA,MAAKE,cAAL,CAAsB,MAAKA,cAAL,CAAoBF,IAApB,+BAAtB,CACA,MAAKG,WAAL,CAAmB,MAAKA,WAAL,CAAiBH,IAAjB,+BAAnB,CAEA,MAAKI,cAAL,CAAsB,MAAKA,cAAL,CAAoBJ,IAApB,+BAAtB,CACA,MAAKK,aAAL,CAAqB,MAAKA,aAAL,CAAmBL,IAAnB,+BAArB,CACA,MAAKM,eAAL,CAAuB,MAAKA,eAAL,CAAqBN,IAArB,+BAAvB,CACA,MAAKO,UAAL,CAAkB,MAAKA,UAAL,CAAgBP,IAAhB,+BAAlB,CACA,MAAKQ,MAAL,CAAc,MAAKA,MAAL,CAAYR,IAAZ,+BAAd,CAIA,MAAKS,KAAL,CAAa,CACTC,MAAM,CAAE,MAAKZ,KAAL,CAAWY,MADV,CAETC,UAAU,CAAE,MAAKb,KAAL,CAAWa,UAFd,CAGTC,QAAQ,CAAE,MAAKd,KAAL,CAAWc,QAHZ,CAITC,IAAI,CAAE,MAAKf,KAAL,CAAWe,IAJR,CAKTC,SAAS,CAAE,KALF,CAMTC,SAAS,CAAE,KANF,CAOTC,QAAQ,CAAE,MAAKlB,KAAL,CAAWkB,QAPZ,CAQTC,QAAQ,CAAE,MAAKnB,KAAL,CAAWmB,QARZ,CASTC,aAAa,CAAG,EATP,CAUTC,YAAY,CAAC,EAVJ,CAWTC,MAAM,CAAC,MAAKtB,KAAL,CAAWuB,OAXT,CAYTC,MAAM,CAAC,MAAKxB,KAAL,CAAWwB,MAZT,CAAb,CAeA,MAAKC,YAAL,CAAkB,EAAlB,CACA,GAAIC,CAAAA,IAAI,CAAG,MAAK1B,KAAL,CAAW2B,SAAtB,CACA,MAAKC,OAAL,CAAeF,IAAI,CAACG,IAAL,CAAU,SAAAC,OAAO,QAAEA,CAAAA,OAAO,CAAC,CAAD,CAAP,GAAa,MAAKnB,KAAL,CAAWC,MAA1B,EAAjB,CAAf,CACA,GAAG,MAAKgB,OAAL,GAAiBG,SAApB,CAA+B,CAC3B,MAAKC,UAAL,CAAkB,CAAlB,CACH,CAFD,IAEO,CACH,MAAKA,UAAL,CAAkB,MAAKJ,OAAL,CAAa,CAAb,CAAlB,CACH,CArCc,aAuCd,C,8EAKD,CAAI;AACA;AAGA,GAAIK,CAAAA,MAAM,CAAG,CACTC,OAAO,CAAC,CAAC,eAAe,kBAAhB,CADC,CAETC,MAAM,CAAC,KAFE,CAGTC,WAAW,CAAC,SAHH,CAAb,CAJJ,QAWmBC,CAAAA,CAXnB,+GAWI,iBAAiBC,CAAjB,wIACUC,CAAAA,KAAK,CAAC1C,OAAO,CAAC,WAAT,CAAqBoC,MAArB,CAAL,CAAkCO,IAAlC,CAAuC,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAA1C,EAA0DF,IAA1D,CAA+D,SAAAC,GAAG,QAAEH,CAAAA,CAAC,CAACK,QAAF,CAAW,CAAC9B,UAAU,CAAC4B,GAAG,CAACG,SAAhB,CAAX,CAAF,EAAlE,CADV,8BAEUL,CAAAA,KAAK,CAAC1C,OAAO,CAAC,UAAT,CAAoBoC,MAApB,CAAL,CAAiCO,IAAjC,CAAsC,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EAAzC,EAAuDF,IAAvD,CAA4D,SAAAC,GAAG,QAAEH,CAAAA,CAAC,CAACK,QAAF,CAAW,CAACxB,QAAQ,CAACsB,GAAG,CAACtB,QAAd,CAAX,CAAF,EAA/D,CAFV,8BAGUoB,CAAAA,KAAK,CAAC1C,OAAO,CAAC,UAAT,CAAoBoC,MAApB,CAAL,CAAiCO,IAAjC,CAAsC,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EAAzC,EAAuDF,IAAvD,CAA4D,SAAAC,GAAG,QAAEH,CAAAA,CAAC,CAACK,QAAF,CAAW,CAACzB,QAAQ,CAACuB,GAAG,CAACvB,QAAd,CAAX,CAAF,EAA/D,CAHV,8BAIUqB,CAAAA,KAAK,CAAC1C,OAAO,CAAC,QAAT,CAAkBoC,MAAlB,CAAL,CAA+BO,IAA/B,CAAoC,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EAAvC,EAAqDF,IAArD,CAA0D,SAAAC,GAAG,CAAE,CAACH,CAAC,CAACK,QAAF,CAAW,CAACnB,MAAM,CAACiB,GAAG,CAACjB,MAAZ,CAAX,EAAgCc,CAAC,CAACtC,KAAF,CAAQP,YAAR,CAAqBgD,GAAG,CAACjB,MAAzB,EAAiC,CAAjI,CAJV,QAKIqB,OAAO,CAACC,GAAR,CAAYR,CAAC,CAAC3B,KAAd,EALJ,sDAXJ,oCAmBI0B,CAAC,CAAC,IAAD,CAAD,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEH,C,sDAEcU,C,CAAE,CACbA,CAAC,CAACC,cAAF,GACA,GAAIC,CAAAA,SAAS,CAAGC,QAAQ,CAACH,CAAC,CAACI,MAAF,CAASC,EAAV,CAAxB,CAGA,GAAIC,CAAAA,aAAa,CAAG,KAAK1C,KAAL,CAAWU,YAA/B,CACAgC,aAAa,CAACJ,SAAD,CAAb,CAA2B,CAACI,aAAa,CAACJ,SAAD,CAAzC,CAEA,KAAKN,QAAL,CAAc,CAACtB,YAAY,CAACgC,aAAd,CAAd,EAGH,C,8CAGUN,C,CAAE,CACTA,CAAC,CAACC,cAAF,GAEA,GAAIM,CAAAA,KAAK,CAAGC,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,KAA/C,CAEA,GAAIxB,CAAAA,MAAM,CAAG,CACTC,OAAO,CAAC,CAAC,eAAe,kBAAhB,CADC,CAETwB,IAAI,CAACC,IAAI,CAACC,SAAL,CAAe,CAAC,OAAON,KAAR,CAAf,CAFI,CAGTnB,MAAM,CAAC,MAHE,CAITC,WAAW,CAAC,SAJH,CAAb,CAMA,GAAIyB,CAAAA,OAAO,CAAG,CACV3B,OAAO,CAAC,CAAC,eAAe,kBAAhB,CADE,CAEVC,MAAM,CAAC,KAFG,CAGVC,WAAW,CAAC,SAHF,CAAd,CAXS,QAgBMC,CAAAA,CAhBN,mHAgBT,kBAAiBC,CAAjB,6IACUC,CAAAA,KAAK,CAAC1C,OAAO,CAAC,SAAT,CAAmBoC,MAAnB,CAAL,CAAgCO,IAAhC,CAAqC,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAAxC,EAAwDF,IAAxD,CAA6D,SAAAC,GAAG,CAAG,CACrEI,OAAO,CAACC,GAAR,CAAYL,GAAZ,EACC,CAFC,CADV,+BAIUF,CAAAA,KAAK,CAAC1C,OAAO,CAAC,UAAT,CAAoBgE,OAApB,CAAL,CAAkCrB,IAAlC,CAAuC,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EAA1C,EAAwDF,IAAxD,CAA6D,SAAAC,GAAG,CAAE,CAACH,CAAC,CAACK,QAAF,CAAW,CAACxB,QAAQ,CAACsB,GAAG,CAACtB,QAAd,CAAX,EAAoC,CAAvG,CAJV,yDAhBS,qCAqBJ,CACLkB,CAAC,CAAC,IAAD,CAAD,CAEAkB,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,KAAnC,CAAyC,EAAzC,CAEH,C,oDACaV,C,CACd,CACIA,CAAC,CAACC,cAAF,GACA,GAAItB,CAAAA,IAAI,CAAG,CAACb,UAAU,CAAE,KAAKF,KAAL,CAAWE,UAAxB,CAAmCM,QAAQ,CAAE,KAAKR,KAAL,CAAWQ,QAAxD,CAAiEP,MAAM,CAAC,KAAKZ,KAAL,CAAWY,MAAnF,CAAX,CACA,KAAKZ,KAAL,CAAWR,WAAX,CAAuBkC,IAAvB,EACA,KAAKiB,QAAL,CAAc,CAAC3B,SAAS,CAAE,IAAZ,CAAd,EACH,C,kDACY+B,C,CACb,CACIA,CAAC,CAACC,cAAF,GACA,GAAIf,CAAAA,MAAM,CAAG,CACTC,OAAO,CAAC,CAAC,eAAe,kBAAhB,CADC,CAETC,MAAM,CAAC,KAFE,CAGTC,WAAW,CAAC,SAHH,CAAb,CAFJ,QAOmBC,CAAAA,CAPnB,mHAOI,kBAAiBC,CAAjB,6IACUC,CAAAA,KAAK,CAAC1C,OAAO,CAAC,QAAT,CAAkBoC,MAAlB,CAAL,CAA+BO,IAA/B,CAAoC,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAAvC,EAAuDF,IAAvD,CAA4D,SAAAC,GAAG,CAAG,CACpE,GAAGA,GAAG,CAACqB,MAAJ,EAAc,SAAjB,CAA2B,CACvBxB,CAAC,CAACtC,KAAF,CAAQV,UAAR,GACAgD,CAAC,CAACK,QAAF,CAAW,CAAC1B,SAAS,CAAE,IAAZ,CAAX,EACH,CACJ,CALK,CADV,yDAPJ,qCAgBIoB,CAAC,CAAC,IAAD,CAAD,CAIH,C,sDAEcU,C,CACf,CACIA,CAAC,CAACC,cAAF,GACA,GAAI9B,CAAAA,QAAQ,CAAGqC,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,KAAvD,CAEA,GAAIxB,CAAAA,MAAM,CAAG,CACTC,OAAO,CAAC,CAAC,eAAe,kBAAhB,CADC,CAETwB,IAAI,CAACC,IAAI,CAACC,SAAL,CAAe,CAAC1C,QAAQ,CAACA,QAAV,CAAf,CAFI,CAGTiB,MAAM,CAAC,KAHE,CAITC,WAAW,CAAC,SAJH,CAAb,CAJJ,QAUmBC,CAAAA,CAVnB,mHAUI,kBAAiBC,CAAjB,6IACUC,CAAAA,KAAK,CAAC1C,OAAO,CAAC,UAAT,CAAoBoC,MAApB,CAAL,CAAiCO,IAAjC,CAAsC,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAAzC,EAAyDF,IAAzD,CAA8D,SAAAC,GAAG,CAAG,CACtEH,CAAC,CAACtC,KAAF,CAAQT,cAAR,CAAuB2B,QAAvB,EACAoB,CAAC,CAACK,QAAF,CAAW,CAACzB,QAAQ,CAAEuB,GAAG,CAACvB,QAAf,CAAX,EACH,CAHK,CADV,yDAVJ,qCAiBImB,CAAC,CAAC,IAAD,CAAD,CACAkB,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,KAAxC,CAAgD,EAAhD,CACH,C,gDAEWV,C,CACZ,CACIA,CAAC,CAACC,cAAF,GACAO,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,KAAnC,CAA2C,EAA3C,CAEH,C,oDAEaV,C,CAAE,CACZA,CAAC,CAACC,cAAF,GACA,KAAKvB,YAAL,CAAoB,EAApB,CACA,GAAIsC,CAAAA,CAAC,CAAGR,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAA7C,CACA,GAAIxB,CAAAA,MAAM,CAAG,CACTC,OAAO,CAAC,CAAC,eAAe,kBAAhB,CADC,CAETC,MAAM,CAAC,KAFE,CAGTC,WAAW,CAAC,SAHH,CAAb,CAJY,QASGC,CAAAA,CATH,mHASZ,kBAAiBC,CAAjB,6IACUC,CAAAA,KAAK,CAAC1C,OAAO,CAAC,YAAR,CAAqBkE,CAAtB,CAAwB9B,MAAxB,CAAL,CAAqCO,IAArC,CAA0C,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAA7C,EAA6DF,IAA7D,CAAkE,SAAAC,GAAG,QAAEH,CAAAA,CAAC,CAACK,QAAF,CAAW,CAAC9B,UAAU,CAAC4B,GAAG,CAACG,SAAhB,CAAX,CAAF,EAArE,CADV,yDATY,qCAYZP,CAAC,CAAC,IAAD,CAAD,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIH,C,wDAEeU,C,CAAE,CACd,GAAId,CAAAA,MAAM,CAAG,CACTC,OAAO,CAAC,CAAC,eAAe,kBAAhB,CADC,CAETC,MAAM,CAAC,QAFE,CAGTC,WAAW,CAAC,SAHH,CAAb,CADc,QAMCC,CAAAA,CAND,mHAMd,kBAAiBC,CAAjB,6IACUC,CAAAA,KAAK,CAAC1C,OAAO,CAAC,YAAR,CAAqBkD,CAAC,CAACI,MAAF,CAASC,EAA/B,CAAkCnB,MAAlC,CAAL,CAA+CO,IAA/C,CAAoD,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAAvD,EAAuEF,IAAvE,CAA4E,SAAAC,GAAG,QAAEH,CAAAA,CAAC,CAACK,QAAF,CAAW,CAAC9B,UAAU,CAAC4B,GAAG,CAACG,SAAhB,CAAX,CAAF,EAA/E,CADV,yDANc,qCASdP,CAAC,CAAC,IAAD,CAAD,CAEH,C,sCAEM2B,K,CAAM,CACTA,KAAK,CAAChB,cAAN,GAEA,GAAItB,CAAAA,IAAI,CAAG,EAAX,CACA,KAAKf,KAAL,CAAWQ,QAAX,CAAoB8C,OAApB,CAA4B,SAASlB,CAAT,CAAW,CACnC,GAAIA,CAAC,CAACmB,MAAF,CAASC,QAAT,CAAkBH,KAAK,CAACb,MAAN,CAAaM,KAA/B,GAAyCV,CAAC,CAACqB,IAAF,CAAOD,QAAP,CAAgBH,KAAK,CAACb,MAAN,CAAaM,KAA7B,CAA7C,CAAiF,CAC7E/B,IAAI,CAAC2C,OAAL,CAAatB,CAAb,EACH,CACJ,CAJD,EAKA,GAAGiB,KAAK,CAACb,MAAN,CAAaM,KAAb,EAAoB,EAAvB,CAA0B,CAAC/B,IAAI,CAAC,EAAL,CAAS,CACpC,KAAKiB,QAAL,CAAc,CAACvB,aAAa,CAACM,IAAf,CAAd,EAEH,C,uCAID,iBACI,GAAI,KAAKf,KAAL,CAAWK,SAAf,CAA0B,CACtB,mBAEI,oBAAC,QAAD,EAAU,EAAE,CAAC,UAAb,EAFJ,CAKH,CAED,GAAI,KAAKL,KAAL,CAAWM,SAAf,CAA0B,CACtB,mBACI,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EADJ,CAGH,CAED,mBACI,4CAEI,2BAAK,SAAS,CAAC,uBAAf,eACI,yCAAa,KAAKN,KAAL,CAAWC,MAAxB,0BADJ,CAFJ,cAKI,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,qCAAf,eACI,2BAAK,SAAS,CAAC,MAAf,eAEI,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,UAAf,eACI,8BAAQ,SAAS,CAAC,iBAAlB,CAAoC,IAAI,CAAC,QAAzC,CACQ,OAAO,CAAE,KAAKT,YADtB,WADJ,CADJ,cAMI,2BAAK,SAAS,CAAC,0BAAf,eACI,8BAAQ,SAAS,CAAC,iBAAlB,CAAoC,IAAI,CAAC,QAAzC,CACQ,OAAO,CAAE,KAAKF,aADtB,YADJ,CANJ,CAFJ,cAeI,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,WAAf,eACI,oBAAC,MAAD,EAAQ,KAAK,KAAb,CAAc,GAAG,CAAE,KAAKU,KAAL,CAAWa,MAA9B,EADJ,cAEI,yBAAG,SAAS,CAAC,qBAAb,EAAoC,KAAKb,KAAL,CAAWC,MAA/C,CAFJ,CADJ,CAfJ,cAsBI,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,WAAf,eACI,yBAAG,cAAY,gBAAf,CAAgC,SAAS,CAAC,kBAA1C,aAAsE,KAAKD,KAAL,CAAWO,QAAjF,CADJ,CADJ,CAtBJ,cA4BI,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,WAAf,eACI,6BAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,cAAtB,EADJ,cAEI,8BAFJ,cAGI,8BAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAE,KAAKd,cAApC,WAHJ,CADJ,CA5BJ,CADJ,CADJ,cAyCI,2BAAK,SAAS,CAAC,qCAAf,eACI,2BAAK,SAAS,CAAC,MAAf,eACI,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,WAAf,eAGA,gCAAU,SAAS,CAAC,cAApB,CAAmC,IAAI,CAAC,GAAxC,CAA4C,EAAE,CAAC,SAA/C,CACU,WAAW,CAAC,gBADtB,EAHA,CADJ,CADJ,cASI,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,WAAf,eACI,8BAAQ,SAAS,CAAC,wBAAlB,CAA2C,IAAI,CAAC,QAAhD,CAAyD,OAAO,CAAE,KAAKK,UAAvE,SADJ,cAEI,8BAAQ,SAAS,CAAC,wBAAlB,CAA2C,IAAI,CAAC,QAAhD,CACQ,OAAO,CAAE,KAAKJ,WADtB,UAFJ,CADJ,CATJ,cAkBI,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,WAAf,eACI,iEAAuB,6BAAO,IAAI,CAAC,MAAZ,EAAvB,CADJ,CADJ,CAlBJ,CADJ,CAzCJ,CALJ,cA0EI,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,WAAf,eAEI,yDAAe,6BAAO,IAAI,CAAG,MAAd,CAAqB,QAAQ,CAAE,KAAKK,MAApC,CAA4C,WAAW,CAAC,oCAAxD,EAAf,CAFJ,cAGI,2BAAK,SAAS,CAAC,MAAf,EACK,KAAKC,KAAL,CAAWS,aAAX,EAA4B,EAA5B,CAA+B,EAA/B,CAAkC,KAAKT,KAAL,CAAWS,aAAX,CAAyBkD,GAAzB,CAA6B,SAAChC,CAAD,CAAGiC,CAAH,qBAC5D,2BAAK,GAAG,CAAEA,CAAV,CAAa,SAAS,CAAC,eAAvB,eACI,8CAAkBjC,CAAC,CAAC4B,MAApB,oBAA4C5B,CAAC,CAACkC,IAA9C,2BAA0ElC,CAAC,CAAC8B,IAA5E,MADJ,CAD4D,EAA7B,CADvC,CAHJ,CADJ,CA1EJ,cAyFI,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,qCAAf,eACI,2BAAK,SAAS,CAAC,MAAf,EACK,EAAE,KAAK3C,YAAL,GAAqB,EAAvB,eAA4B,2BAAK,SAAS,CAAC,WAAf,eAA2B,2BAAK,SAAS,CAAE,kBAAhB,EAAoC,KAAKA,YAAzC,CAA3B,CAA5B,CAA0H,EAD/H,CAEK,KAAKd,KAAL,CAAWE,UAAX,CAAsByD,GAAtB,CAA0B,SAAChC,CAAD,CAAGiC,CAAH,qBACvB,2BAAK,GAAG,CAAEA,CAAV,CAAa,SAAS,CAAC,KAAvB,eACI,2BAAK,SAAS,CAAC,WAAf,eACI,oBAAC,MAAD,EAAQ,KAAK,KAAb,CAAc,GAAG,CAAE3E,QAAnB,EADJ,cAEI,yBAAG,SAAS,CAAC,qBAAb,UAAyC0C,CAAzC,CAFJ,cAGI,yBAAG,SAAS,CAAC,kBAAb,aAAyCmC,YAAY,CAACC,OAAb,CAAqBpC,CAArB,IAA0B,IAA1B,CAA+B,aAAaA,CAA5C,CAA8CmC,YAAY,CAACC,OAAb,CAAqBpC,CAArB,CAAvF,CAHJ,cAII,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAG,gBAAlC,CAAmD,EAAE,CAAIA,CAAzD,CAA4D,OAAO,CAAE,MAAI,CAAC9B,eAA1E,aAJJ,cAKI,8BALJ,cAMI,8BANJ,CADJ,CADuB,EAA1B,CAFL,cAeQ,8BAfR,cAgBQ,2BAAK,SAAS,CAAG,KAAjB,eACI,2BAAK,SAAS,CAAC,WAAf,eACI,6BAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,WAAtB,CAAkC,WAAW,CAAG,kBAAhD,EADJ,CADJ,cAII,2BAAK,SAAS,CAAC,WAAf,eACI,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAG,iBAAlC,CAAoD,OAAO,CAAE,KAAKD,aAAlE,WADJ,CAJJ,CAhBR,CADJ,CADJ,cA6BI,2BAAK,SAAS,CAAC,qCAAf,eACI,2BAAK,SAAS,CAAC,MAAf,eACI,0BAAI,SAAS,CAAC,6BAAd,EACC,KAAKI,KAAL,CAAWQ,QAAX,CAAoBmD,GAApB,CAAwB,SAAChC,CAAD,CAAGiC,CAAH,qBACrB,0BAAI,GAAG,CAAEA,CAAT,CAAY,SAAS,CAAC,iBAAtB,eACI,2BAAK,SAAS,CAAC,WAAf,eACI,yBAAG,SAAS,CAAC,kBAAb,EADJ,cAEI,2BAAK,GAAG,CAAEjC,CAAC,CAACqC,GAAZ,EAFJ,cAGI,yBAAG,SAAS,CAAC,aAAb,EAA4BrC,CAAC,CAAC8B,IAA9B,CAHJ,cAII,yBAAG,SAAS,CAAC,kBAAb,wBAAoD9B,CAAC,CAAC4B,MAAtD,QAAkE5B,CAAC,CAACkC,IAApE,KAJJ,cAKI,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAG,mBAAlC,SALJ,cAMI,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAG,iBAAlC,CAAoD,EAAE,CAAIlC,CAAC,CAACc,EAA5D,CAAgE,OAAO,CAAE,MAAI,CAAC9C,cAA9E,YANJ,CAOK,MAAI,CAACK,KAAL,CAAWU,YAAX,CAAwBiB,CAAC,CAACc,EAA1B,eACG,2BAAK,SAAS,CAAC,MAAf,EACKd,CAAC,CAACsC,OAAF,CAAUN,GAAV,CAAc,SAACO,CAAD,CAAGC,CAAH,qBACX,2BAAK,GAAG,CAAIA,CAAZ,CAAe,SAAS,CAAC,iBAAzB,eACI,yBAAG,SAAS,CAAC,aAAb,EAA4BD,CAAC,CAACT,IAA9B,KADJ,cAEI,yBAAG,SAAS,CAAC,kBAAb,mBAA+CS,CAAC,CAACX,MAAjD,QAA6DW,CAAC,CAACL,IAA/D,CAFJ,CADW,EAAd,CADL,CADH,CASQ,EAhBb,cAiBI,8BAjBJ,cAkBI,8BAlBJ,CADJ,CADqB,EAAxB,CADD,CADJ,CADJ,CA7BJ,CAzFJ,CADJ,CA4JH,C,kBAzZUrF,KAAK,CAAC4F,S,EA8ZzB,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACrE,KAAD,CAAW,CAE/B,MAAO,CACHC,MAAM,CAACD,KAAK,CAACC,MADV,CAEHM,QAAQ,CAACP,KAAK,CAACO,QAFZ,CAGHJ,QAAQ,CAACH,KAAK,CAACG,QAHZ,CAIHC,IAAI,CAACJ,KAAK,CAACI,IAJR,CAKHF,UAAU,CAAEF,KAAK,CAACE,UALf,CAMHM,QAAQ,CAACR,KAAK,CAACQ,QANZ,CAOHQ,SAAS,CAAChB,KAAK,CAACgB,SAPb,CAQHsD,QAAQ,CAACtE,KAAK,CAACsE,QARZ,CASHzD,MAAM,CAAEb,KAAK,CAACa,MATX,CAAP,CAYH,CAdD,CAgBA,GAAM0D,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,QAAD,CAAc,CACrC,MAAO,CAEH7F,UAAU,CAAE,4BAAK6F,CAAAA,QAAQ,CAAC7F,WAAU,EAAX,CAAb,EAFT,CAGHC,cAAc,CAAC,wBAAC2B,QAAD,QAAYiE,CAAAA,QAAQ,CAAC5F,eAAc,CAAC2B,QAAD,CAAf,CAApB,EAHZ,CAIH1B,WAAW,CAAE,qBAAC4F,KAAD,QAASD,CAAAA,QAAQ,CAAC3F,YAAW,CAAC4F,KAAD,CAAZ,CAAjB,EAJV,CAKH3F,YAAY,CAAE,sBAAC+B,MAAD,QAAU2D,CAAAA,QAAQ,CAAC1F,aAAY,CAAC+B,MAAD,CAAb,CAAlB,EALX,CAAP,CAQH,CATD,CAYA,cAAepC,CAAAA,OAAO,CAAC4F,eAAD,CAAiBE,kBAAjB,CAAP,CAA4CnF,IAA5C,CAAf","sourcesContent":["import React from \"react\";\nimport { connect } from 'react-redux';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {Redirect} from \"react-router-dom\";\nimport {userlogout,updateheadline,gotoprofile,updateavatar} from \"../../actions\";\nimport Avatar from 'react-avatar';\nimport './img.css';\nimport {bigimg, smallimg} from \"../../actions\";\nconst baseurl = new URL(\"https://ricezonefinalbocheng.herokuapp.com/\");\n\n\nclass Main extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleProfile = this.handleProfile.bind(this);\n        this.handleLogout = this.handleLogout.bind(this);\n        this.handleHeadline = this.handleHeadline.bind(this);\n        this.handleClear = this.handleClear.bind(this);\n\n        this.handlecomments = this.handlecomments.bind(this);\n        this.handlefriends = this.handlefriends.bind(this);\n        this.handleunfriends = this.handleunfriends.bind(this);\n        this.handlePost = this.handlePost.bind(this);\n        this.search = this.search.bind(this);\n\n\n\n        this.state = {\n            userId: this.props.userId,\n            friendlist: this.props.friendlist,\n            baseinfo: this.props.baseinfo,\n            data: this.props.data,\n            toProfile: false,\n            toLanding: false,\n            headline: this.props.headline,\n            articles: this.props.articles,\n            searchcontent : [],\n            userscomment:[],\n            cookie:this.props.cookies,\n            avatar:this.props.avatar\n\n        }\n        this.errorMessage='';\n        let temp = this.props.usergroup\n        this.theuser = temp.find(element=>element[0]===this.state.userId)\n        if(this.theuser === undefined) {\n            this.hardcodeId = 1;\n        } else {\n            this.hardcodeId = this.theuser[5];\n        }\n\n        }\n\n\n\n        componentDidMount()\n        {   //fetch(`https://jsonplaceholder.typicode.com/posts`).then(res => res.json()).then(res =>\n            //this.props.requestdata(res));\n\n\n            let option = {\n                headers:{\"content-type\":\"application/json\"},\n                method:\"GET\",\n                credentials:\"include\",\n            };\n\n\n            async function b(x){\n                await fetch(baseurl+\"following\",option).then(res => res.json()).then(res=>x.setState({friendlist:res.following}));\n                await fetch(baseurl+\"articles\",option).then(res=>res.json()).then(res=>x.setState({articles:res.articles}));\n                await fetch(baseurl+\"headline\",option).then(res=>res.json()).then(res=>x.setState({headline:res.headline}));\n                await fetch(baseurl+\"avatar\",option).then(res=>res.json()).then(res=>{x.setState({avatar:res.avatar});x.props.updateavatar(res.avatar)});\n                console.log(x.state)\n\n            }\n            b(this);\n\n\n\n            // let a = () => {\n            //         this.setState({data: this.props.data});\n            //         if(this.state.friendlist.length == 0) {\n            //\n            //             this.getfriends(this.props.usergroup, this.hardcodeId);\n            //             this.getarticles(this.props.data);\n            //\n            //             }\n            //         }\n            // setTimeout(a, 500)\n\n        }\n\n        handlecomments(e){\n            e.preventDefault();\n            let commentid = parseInt(e.target.id)\n\n\n            let commentstatus = this.state.userscomment\n            commentstatus[commentid] = !commentstatus[commentid]\n\n            this.setState({userscomment:commentstatus})\n\n\n        }\n\n\n        handlePost(e){\n            e.preventDefault();\n\n            let npost = document.getElementById(\"newpost\").value;\n\n            let option = {\n                headers:{\"content-type\":\"application/json\"},\n                body:JSON.stringify({\"text\":npost}),\n                method:\"POST\",\n                credentials:\"include\",\n            };\n            let option1 = {\n                headers:{\"content-type\":\"application/json\"},\n                method:\"GET\",\n                credentials:\"include\",\n            };\n            async function b(x){\n                await fetch(baseurl+\"article\",option).then(res => res.json()).then(res=> {\n                    console.log(res);\n                    })\n                await fetch(baseurl+\"articles\",option1).then(res=>res.json()).then(res=>{x.setState({articles:res.articles})});\n                };\n            b(this);\n\n            document.getElementById(\"newpost\").value='';\n\n        }\n        handleProfile(e)\n        {\n            e.preventDefault();\n            let temp = {friendlist: this.state.friendlist,articles: this.state.articles,userId:this.props.userId}\n            this.props.gotoprofile(temp);\n            this.setState({toProfile: true});\n        }\n        handleLogout(e)\n        {\n            e.preventDefault();\n            let option = {\n                headers:{\"content-type\":\"application/json\"},\n                method:\"PUT\",\n                credentials:\"include\",\n            };\n            async function b(x){\n                await fetch(baseurl+\"logout\",option).then(res => res.json()).then(res=> {\n                    if(res.result == 'success'){\n                        x.props.userlogout();\n                        x.setState({toLanding: true})\n                    }\n                });\n\n            }\n            b(this);\n\n\n\n        }\n\n        handleHeadline(e)\n        {\n            e.preventDefault();\n            let headline = document.getElementById('headlinetext').value;\n\n            let option = {\n                headers:{\"content-type\":\"application/json\"},\n                body:JSON.stringify({headline:headline}),\n                method:\"PUT\",\n                credentials:\"include\",\n            };\n            async function b(x){\n                await fetch(baseurl+\"headline\",option).then(res => res.json()).then(res=> {\n                    x.props.updateheadline(headline);\n                    x.setState({headline: res.headline});\n                });\n\n            }\n            b(this);\n            document.getElementById('headlinetext').value = '';\n        }\n\n        handleClear(e)\n        {\n            e.preventDefault();\n            document.getElementById('newpost').value = '';\n\n        }\n\n        handlefriends(e){\n            e.preventDefault();\n            this.errorMessage = ''\n            let a = document.getElementById('newfriend').value;\n            let option = {\n                headers:{\"content-type\":\"application/json\"},\n                method:\"PUT\",\n                credentials:\"include\",\n            };\n            async function b(x){\n                await fetch(baseurl+\"following/\"+a,option).then(res => res.json()).then(res=>x.setState({friendlist:res.following}));\n            }\n            b(this);\n            // let adding =  this.props.usergroup.find(element=>element[0]==a)\n            // if(a!='' && !this.state.friendlist.includes(a) && a!=this.props.userId && !(adding === undefined)) {\n            //     let temp = [...this.state.friendlist];\n            //     temp.push(document.getElementById('newfriend').value);\n            //     this.setState({friendlist: temp});\n            //     document.getElementById('newfriend').value = '';\n            // } else if (this.state.friendlist.includes(a) || a == this.props.userId){\n            //     this.errorMessage = 'Cannot add followed user or yourself!'\n            // } else if (adding === undefined){\n            //     this.errorMessage = 'Not an existing user!'\n\n\n\n        }\n\n        handleunfriends(e){\n            let option = {\n                headers:{\"content-type\":\"application/json\"},\n                method:\"DELETE\",\n                credentials:\"include\",\n            };\n            async function b(x){\n                await fetch(baseurl+\"following/\"+e.target.id,option).then(res => res.json()).then(res=>x.setState({friendlist:res.following}));\n            }\n            b(this);\n\n        }\n\n        search(event){\n            event.preventDefault();\n\n            let temp = [];\n            this.state.articles.forEach(function(e){\n                if (e.author.includes(event.target.value) || e.text.includes(event.target.value)){\n                    temp.unshift(e);\n                }\n            })\n            if(event.target.value==''){temp=[];}\n            this.setState({searchcontent:temp});\n\n        }\n\n\n        render()\n        {\n            if (this.state.toProfile) {\n                return (\n\n                    <Redirect to='/Profile'/>\n\n                )\n            }\n\n            if (this.state.toLanding) {\n                return (\n                    <Redirect to='/'/>\n                )\n            }\n\n            return (\n                <div>\n\n                    <div className=\"jumbotron text-center\">\n                        <h1> Hello! {this.state.userId}!Welcome to your zone!</h1>\n                    </div>\n                    <div className='row'>\n                        <div className=\"col-lg-4 col-md-4 col-sm-4 col-xs-4\">\n                            <div className='card'>\n\n                                <div className='row'>\n                                    <div className='col-md-6'>\n                                        <button className=\"btn btn-primary\" type='submit'\n                                                onClick={this.handleLogout}>Logout\n                                        </button>\n                                    </div>\n                                    <div className='col-md-offset-4 col-md-6'>\n                                        <button className=\"btn btn-primary\" type='submit'\n                                                onClick={this.handleProfile}>Profile\n                                        </button>\n                                    </div>\n                                </div>\n\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        <Avatar round src={this.state.avatar}/>\n                                        <p className=\"font-weight-lighter\">{this.state.userId}</p>\n                                    </div>\n                                </div>\n\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        <p data-testid=\"custom-element\" className=\"font-weight-bold\">Status: {this.state.headline}</p>\n                                    </div>\n                                </div>\n\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        <input type='text' id='headlinetext'/>\n                                        <br/>\n                                        <button type='submit' onClick={this.handleHeadline}>Change</button>\n\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                        <div className=\"col-lg-8 col-md-8 col-sm-8 col-xs-8\">\n                            <div className='card'>\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        {/*<textarea className=\"form-control\" rows=\"1\" id='posttitle'*/}\n                                        {/*          placeholder='Post title'></textarea>*/}\n                                    <textarea className=\"form-control\" rows=\"5\" id='newpost'\n                                              placeholder='Post your day!'></textarea>\n                                    </div>\n                                </div>\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        <button className=\"btn btn-primary center\" type='submit' onClick={this.handlePost}>Post</button>\n                                        <button className=\"btn btn-primary center\" type='submit'\n                                                onClick={this.handleClear}>Clear\n                                        </button>\n                                    </div>\n                                </div>\n\n                                <div className='row'>\n                                    <div className='col-md-12'>\n                                        <p>Upload your picture:<input type='file'/></p>\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n                    <div className='row'>\n                        <div className='col-md-12'>\n\n                            <p>Search bar: <input type = 'text' onChange={this.search} placeholder='For now, can only search by userId'></input></p>\n                            <div className='card'>\n                                {this.state.searchcontent == []?'':this.state.searchcontent.map((x,i)=>\n                                    <div key={i} className='row col-md-12'>\n                                        <p>  The user is {x.author} and is post on {x.date}.The post content is \"{x.text}\"</p>\n\n                                    </div>)}\n                            </div>\n                        </div>\n\n                    </div>\n\n                    <div className='row'>\n                        <div className=\"col-lg-4 col-md-4 col-sm-4 col-xs-4\">\n                            <div className='card'>\n                                {!(this.errorMessage=== '')? <div className='col-md-12'><div className= 'row alert-danger'>{this.errorMessage}</div></div>:''}\n                                {this.state.friendlist.map((x,i)=>\n                                    <div key={i} className='row'>\n                                        <div className='col-md-12'>\n                                            <Avatar round src={smallimg}/>\n                                            <p className=\"font-weight-lighter\">user {x}</p>\n                                            <p className=\"font-weight-bold\">Status: {localStorage.getItem(x)===null?'I am user '+x:localStorage.getItem(x)}</p>\n                                            <button type='submit' className = 'btn btn-danger' id = {x} onClick={this.handleunfriends}>Unfollow</button>\n                                            <br></br>\n                                            <br></br>\n                                        </div>\n                                    </div>)}\n\n\n                                    <br></br>\n                                    <div className = 'row'>\n                                        <div className='col-md-12'>\n                                            <input type='text' id='newfriend' placeholder = 'add a new friend'/>\n                                        </div>\n                                        <div className='col-md-12'>\n                                            <button type='submit' className = 'btn btn-primary' onClick={this.handlefriends}>Follow</button>\n                                        </div>\n                                    </div>\n                            </div>\n                        </div>\n\n                        <div className=\"col-lg-8 col-md-8 col-sm-8 col-xs-8\">\n                            <div className='card'>\n                                <ul className=\"list-group list-group-flush\">\n                                {this.state.articles.map((x,i)=>\n                                    <li key={i} className=\"list-group-item\">\n                                        <div className='col-md-12'>\n                                            <p className=\"font-weight-bold\"></p>\n                                            <img src={x.img}/>\n                                            <p className=\"font-italic\">{x.text}</p>\n                                            <p className=\"font-weight-bold\">Published by: User {x.author} on {x.date} </p>\n                                            <button type='submit' className = 'btn btn-secondary'>Edit</button>\n                                            <button type='submit' className = 'btn btn-warning' id = {x.id} onClick={this.handlecomments}>Comment</button>\n                                            {this.state.userscomment[x.id]?\n                                                <div className='card'>\n                                                    {x.comment.map((y,j)=>\n                                                        <div key = {j} className=\"list-group-item\">\n                                                            <p className=\"font-italic\">{y.text} </p>\n                                                            <p className=\"font-weight-bold\">Published by: {y.author} on {y.date}</p>\n                                                        </div>\n                                                    )}\n                                                </div>\n                                                    :''}\n                                            <br></br>\n                                            <br></br>\n                                        </div>\n                                    </li>)}\n                                    </ul>\n\n                            </div>\n                        </div>\n                    </div>\n\n\n                </div>\n\n            )\n\n        }\n\n    }\n\n\nconst mapStateToProps = (state) => {\n\n    return {\n        userId:state.userId,\n        headline:state.headline,\n        baseinfo:state.baseinfo,\n        data:state.data,\n        friendlist: state.friendlist,\n        articles:state.articles,\n        usergroup:state.usergroup,\n        comments:state.comments,\n        avatar: state.avatar\n\n    }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n\n        userlogout: () =>dispatch(userlogout()),\n        updateheadline:(headline)=>dispatch(updateheadline(headline)),\n        gotoprofile: (input)=>dispatch(gotoprofile(input)),\n        updateavatar: (avatar)=>dispatch(updateavatar(avatar))\n\n    }\n};\n\n\nexport default connect(mapStateToProps,mapDispatchToProps)(Main)"]},"metadata":{},"sourceType":"module"}